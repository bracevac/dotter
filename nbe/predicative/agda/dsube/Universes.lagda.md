# Cumulative PER Universe Hierarchy

This file formalizes a cumulative universe hierarchy of partial
equivalence relations (PERs) over the semantic domain `ùïç` (cf. `NbE`
module) √† la Abel and collaborators.

We may think of the universe hierarchy as a level-indexed family of
inductive-recursive definitions.  Since Agda offers no linguistic support
for *indexed* inductive-recursive definitions (go ahead and try it!),
we have to emulate them. Concretely, that means

  1. Define the inductive-recursive universe for level 0 and prove PER
     properties.
  2. Define an inductive-recursive universe for level n+1,
     parameterized over the immediate predecessor universe level n, and
     prove PER properties.
  3. From the previous two definitions, define the level-indexed
     universe hierarchy as a large elimination. Prove its PER properties,
     which are an easy consequence of the previous results. Also, prove
     cumulativity properties.
  4. Finally, define the limit of the indexed family of universes,
     yielding a single universe definition that hides the explicit level
     indices.

```agda
module dsube.Universes where

open import Data.Bool using (true; false)
open import Data.Product using (Œ£; ‚àÉ; Œ£-syntax; ‚àÉ-syntax; _,_; _√ó_)
open Œ£
open import Data.Sum using (_‚äé_; inj‚ÇÅ; inj‚ÇÇ)
open import Function using (_‚àò_; id)
open import Data.Empty using (‚ä• ; ‚ä•-elim)
open import Data.Unit using (‚ä§; tt)
import Relation.Binary.PropositionalEquality as Eq
open Eq using (_‚â°_; refl)
open import Data.Nat using (‚Ñï; zero; suc; _‚â§‚Ä≤_; _<‚Ä≤_; _‚äî_)
open import Agda.Primitive using (lzero; lsuc; Level) renaming (_‚äî_ to _‚äîÀ°_)
open import dsube.Syntax using (‚Ñí)
open import dsube.NbE
open import dsube.Relations
open import dsube.RelFun
open import dsube.PER
open Per {{...}}
open Œ†-‚ü®_,_‚ü© {{...}}
open [_‚àô_]‚àà_
open [_==_‚àô_==_]‚àà_
open Rel-family {{...}}
open _‚â§‚Ä≤_
```
# Universe Level 0

## Single Type Codes `ùì§‚ÇÄ` and Interpretation Function `ùìîùìµ‚ÇÄ`.

`ùì§‚ÇÄ` defines valid type codes, i.e., the subset of the semantic domain `ùïç`
corresponding to normalized type expressions.
We require that `ùì§‚ÇÄ` is closed under the formation of dependent function types,
i.e., we need to refer to the interpretation/denotation of type codes while
defining them. This leads to the induction-recursion definition principle:
We define `ùì§‚ÇÄ` inductively, simultaneously with the interpretation function
`ùìîùìµ‚ÇÄ`, which recurses over `ùì§‚ÇÄ`.
```agda
-- we first define the El function that takes *single* type codes (and not related pairs) to relations, just as on pen and paper
data ùì§‚ÇÄ : ùïç ‚Üí Set
ùìîùìµ‚ÇÄ : {ùê¥ : ùïç} ‚Üí ùì§‚ÇÄ ùê¥ ‚Üí Rel
```
From another perspective, this corresponds to the Bove&Capretta method of defining
a partial function (`ùìîùìµ‚ÇÄ`) in terms of a total function on the function domain,
which we model by a predicate (`ùì§‚ÇÄ`).
```agda
data ùì§‚ÇÄ where
  ùì§‚ÇÄ-NE : ‚àÄ{NE} ‚Üí ùì§‚ÇÄ (‚Üë‚ü® (·∂ú (VùëÜùëíùë° 0)) ‚ü© NE)

  ùì§‚ÇÄ-ùëÅ : ùì§‚ÇÄ (·∂ú VùëÅ)

  ùì§‚ÇÄ-‚ä§ : ùì§‚ÇÄ (·∂ú V‚ä§)

  ùì§‚ÇÄ-‚ä• : ùì§‚ÇÄ (·∂ú V‚ä•)

  ùì§‚ÇÄ-Œ† : ‚àÄ ùê¥ ùêπ ‚Üí
    {{Œ†-‚ü® ùì§‚ÇÄ , ùìîùìµ‚ÇÄ ‚ü© ùê¥ ùêπ}} ‚Üí
    -------------------------
    ùì§‚ÇÄ (VŒ† ùê¥ ùêπ)

ùìîùìµ‚ÇÄ {·∂ú VùëÅ} _              = ùìùùì™ùìΩ
ùìîùìµ‚ÇÄ {·∂ú V‚ä•} _              = ùì•‚ä•
ùìîùìµ‚ÇÄ {·∂ú V‚ä§} _              = ùì•‚ä§
ùìîùìµ‚ÇÄ {‚Üë‚ü® ·∂ú VùëÜùëíùë° 0 ‚ü© NE} _  = ùì•Ty-Ne 0 NE
ùìîùìµ‚ÇÄ (ùì§‚ÇÄ-Œ† ùê¥ ùêπ)        = ‚Ñø (ùìîùìµ‚ÇÄ ‚åú ùê¥ ‚åù·µà) (Œª ùëé ‚Üí ùìîùìµ‚ÇÄ ‚åú ùêπ ¬∑ ùëé ‚åù·∂ú )
```
### ùìîùìµ‚ÇÄ Interprets Type Codes as PERs
```agda
-- -- for each type ùê¥ in the universe ùì§‚ÇÄ, its interpretation is a PER
ùìîùìµ‚ÇÄ-sym : ‚àÄ {ùê¥} ‚Üí (UA : ùì§‚ÇÄ ùê¥) ‚Üí Sym (ùìîùìµ‚ÇÄ UA)
ùìîùìµ‚ÇÄ-sym ùì§‚ÇÄ-NE        = per-sym
ùìîùìµ‚ÇÄ-sym ùì§‚ÇÄ-ùëÅ         = per-sym
ùìîùìµ‚ÇÄ-sym ùì§‚ÇÄ-‚ä§         = per-sym
ùìîùìµ‚ÇÄ-sym ùì§‚ÇÄ-‚ä• {a} {b} = per-sym {{Per-ùì•‚ä•}} {a} {b}
ùìîùìµ‚ÇÄ-sym (ùì§‚ÇÄ-Œ† ùê¥ ùêπ) = ‚Ñø-sym (ùìîùìµ‚ÇÄ-sym ‚åú ùê¥ ‚åù·µà) ‚åú ùêπ ‚åù·∂ú (Œª a==a' ‚Üí ùìîùìµ‚ÇÄ-sym ‚åú ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ‚åù)

ùìîùìµ‚ÇÄ-trans : ‚àÄ {ùê¥} ‚Üí (UA : ùì§‚ÇÄ ùê¥) ‚Üí Trans (ùìîùìµ‚ÇÄ UA)
ùìîùìµ‚ÇÄ-trans ùì§‚ÇÄ-NE            = per-trans
ùìîùìµ‚ÇÄ-trans ùì§‚ÇÄ-ùëÅ             = per-trans
ùìîùìµ‚ÇÄ-trans ùì§‚ÇÄ-‚ä§             = per-trans
ùìîùìµ‚ÇÄ-trans ùì§‚ÇÄ-‚ä• {a} {b} {c} = per-trans {{Per-ùì•‚ä•}} {a} {b} {c}
ùìîùìµ‚ÇÄ-trans (ùì§‚ÇÄ-Œ† ùê¥ ùêπ)     = ‚Ñø-trans (ùìîùìµ‚ÇÄ-sym ‚åú ùê¥ ‚åù·µà) (ùìîùìµ‚ÇÄ-trans ‚åú ùê¥ ‚åù·µà) ‚åú ùêπ ‚åù·∂ú (Œª a==a' ‚Üí  ùìîùìµ‚ÇÄ-trans ‚åú ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ‚åù)

Per-ùìîùìµ‚ÇÄ : ‚àÄ {ùê¥} ‚Üí (UA : ùì§‚ÇÄ ùê¥) ‚Üí Per (ùìîùìµ‚ÇÄ UA)
Per.per-sym   (Per-ùìîùìµ‚ÇÄ UA) = ùìîùìµ‚ÇÄ-sym UA
Per.per-trans (Per-ùìîùìµ‚ÇÄ UA) = ùìîùìµ‚ÇÄ-trans UA
```
### Uniformity of ùìîùìµ‚ÇÄ

This property asserts that the result of ùìîùìµ‚ÇÄ is independent of the
concrete proof structure of a type code ùì§‚ÇÄ ùê¥. Others might call it a
form of proof irrelevance.

```agda
ùìîùìµ‚ÇÄ-unif : ‚àÄ{ùê¥} ‚Üí (prf prf' : ùì§‚ÇÄ ùê¥) ‚Üí ùìîùìµ‚ÇÄ prf ‚â°·¥ø ùìîùìµ‚ÇÄ prf'
ùìîùìµ‚ÇÄ-unif ùì§‚ÇÄ-NE        ùì§‚ÇÄ-NE          = (Œª x ‚Üí x) , (Œª x ‚Üí x)
ùìîùìµ‚ÇÄ-unif ùì§‚ÇÄ-ùëÅ         ùì§‚ÇÄ-ùëÅ           = (Œª x ‚Üí x) , (Œª x ‚Üí x)
ùìîùìµ‚ÇÄ-unif ùì§‚ÇÄ-‚ä§         ùì§‚ÇÄ-‚ä§           = (Œª x ‚Üí x) , (Œª x ‚Üí x)
ùìîùìµ‚ÇÄ-unif ùì§‚ÇÄ-‚ä•         ùì§‚ÇÄ-‚ä•           = (Œª x ‚Üí tt) , (Œª x ‚Üí tt)
ùìîùìµ‚ÇÄ-unif (ùì§‚ÇÄ-Œ† ùê¥ ùêπ {{Pi}}) (ùì§‚ÇÄ-Œ† ùê¥ ùêπ {{Pi'}}) with Œ†-dom {{Pi}} | Œ†-dom {{Pi'}} | Œ†-cod {{Pi}} | Œ†-cod {{Pi'}}
... | Uùê¥ | Uùê¥' | Uùêπ | Uùêπ' with ùìîùìµ‚ÇÄ-unif Uùê¥ Uùê¥'
... | ElUA‚äÜElUA' , ElUA'‚äÜElUA        = left , right
  where
    left :  ‚Ñø (ùìîùìµ‚ÇÄ Uùê¥) (Œª ùëé ‚Üí ùìîùìµ‚ÇÄ (‚Åà (Uùêπ ùëé))) ‚äÜ ‚Ñø (ùìîùìµ‚ÇÄ Uùê¥') (Œª ùëé ‚Üí ùìîùìµ‚ÇÄ (‚Åà (Uùêπ' ùëé)))
    left Œ†UAUF-f==f' ELUA'a==a' with Œ†UAUF-f==f' (ElUA'‚äÜElUA  ELUA'a==a')
    ... | [‚Åà-rel ELUFa-fa==f'a' ] with ((Uùêπ (memÀ° (ElUA'‚äÜElUA ELUA'a==a')))) | ((Uùêπ' (memÀ° ELUA'a==a')))
    ... | record { ‚Åà = Fa-1 ;  ‚Åà-eval = Fa‚áì-1} | record { ‚Åà = Fa-2 ; ‚Åà-eval = Fa‚áì-2}
          rewrite det-¬∑ Fa‚áì-2 Fa‚áì-1
          with ùìîùìµ‚ÇÄ-unif Fa-2 Fa-1
    ... | _ , conv = [‚Åà-rel (conv ELUFa-fa==f'a') ]
    right : ‚Ñø (ùìîùìµ‚ÇÄ Uùê¥') (Œª ùëé ‚Üí ùìîùìµ‚ÇÄ (‚Åà (Uùêπ' ùëé))) ‚äÜ ‚Ñø (ùìîùìµ‚ÇÄ Uùê¥) (Œª ùëé ‚Üí ùìîùìµ‚ÇÄ (‚Åà (Uùêπ ùëé)))
    right  Œ†UA'UF'-f==f' ELUAa==a' with Œ†UA'UF'-f==f' (ElUA‚äÜElUA'  ELUAa==a')
    ... | [‚Åà-rel ELUF'a-fa==f'a' ] with ((Uùêπ' (memÀ° (ElUA‚äÜElUA' ELUAa==a')))) | ((Uùêπ (memÀ° ELUAa==a')))
    ... | record { ‚Åà = Fa-1 ;  ‚Åà-eval = Fa‚áì-1} | record { ‚Åà = Fa-2 ; ‚Åà-eval = Fa‚áì-2}
          rewrite det-¬∑ Fa‚áì-2 Fa‚áì-1
          with ùìîùìµ‚ÇÄ-unif Fa-2 Fa-1
    ... | _ , conv = [‚Åà-rel (conv ELUF'a-fa==f'a') ]
```
## ùì¢ùìÆùìΩ‚ÇÄ : The PER Universe of Type Codes at Level 0

Next, we define the universe `ùì¢ùìÆùìΩ‚ÇÄ` for type equalities, which is another
inductive-recursive type.  Again, induction-recursion arises here from
the case for Œ†-types, similar to the `ùì§‚ÇÄ` definition.  This time,
though, we have to simultaneously define `ùì¢ùìÆùìΩ‚ÇÄ` (induction part) with
the property that the interpretation `ùìîùìµ‚ÇÄ` respects it (recursion part).

```agda
data ùì¢ùìÆùìΩ‚ÇÄ : Rel
-- we need to define the respect property of EL simultaneously (cf. ùì¢ùìÆùìΩ‚ÇÄ-Œ†)
ùìîùìµ‚ÇÄ-resp-‚äÜ : Respect‚äÜ {ùì§‚ÇÄ} ùìîùìµ‚ÇÄ ùì¢ùìÆùìΩ‚ÇÄ
-- due to contraviarance in Pi, we need to simultaneosly prove it with the opposite direction
ùìîùìµ‚ÇÄ-resp-‚äá : Respect‚äá {ùì§‚ÇÄ} ùìîùìµ‚ÇÄ ùì¢ùìÆùìΩ‚ÇÄ

data ùì¢ùìÆùìΩ‚ÇÄ where
  ùì¢ùìÆùìΩ‚ÇÄ-NE : ‚àÄ{NE NE'} ‚Üí
    NE == NE' ‚àà ùìëùì∏ùìΩ ‚Üí
    -----------------------------------------------
    ‚Üë‚ü® (·∂ú (VùëÜùëíùë° 0)) ‚ü© NE == ‚Üë‚ü® (·∂ú (VùëÜùëíùë° 0)) ‚ü© NE' ‚àà ùì¢ùìÆùìΩ‚ÇÄ

  ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ : (·∂ú VùëÅ) == (·∂ú VùëÅ) ‚àà ùì¢ùìÆùìΩ‚ÇÄ

  ùì¢ùìÆùìΩ‚ÇÄ-‚ä§ : (·∂ú V‚ä§) == (·∂ú V‚ä§) ‚àà ùì¢ùìÆùìΩ‚ÇÄ

  ùì¢ùìÆùìΩ‚ÇÄ-‚ä• : (·∂ú V‚ä•) == (·∂ú V‚ä•) ‚àà ùì¢ùìÆùìΩ‚ÇÄ

  ùì¢ùìÆùìΩ‚ÇÄ-Œ† : ‚àÄ{ùê¥ ùêπ ùê¥' ùêπ'} ‚Üí
    (A==A' : ùê¥ == ùê¥' ‚àà ùì¢ùìÆùìΩ‚ÇÄ) ‚Üí
    {Pi  : ùì§‚ÇÄ (VŒ† ùê¥ ùêπ)} ‚Üí
    {Pi' : ùì§‚ÇÄ (VŒ† ùê¥' ùêπ')} ‚Üí
    --it's easier to do some proofs if we universally quantify over Pi and Pi here
    (‚àÄ {{Pi  : Œ†-‚ü® ùì§‚ÇÄ , ùìîùìµ‚ÇÄ ‚ü© ùê¥ ùêπ}} ‚Üí
       {{Pi' : Œ†-‚ü® ùì§‚ÇÄ , ùìîùìµ‚ÇÄ ‚ü© ùê¥' ùêπ'}} ‚Üí
       (‚àÄ{a a'} ‚Üí (a==a' : a == a' ‚àà ùìîùìµ‚ÇÄ ‚åú ùê¥ ‚åù·µà) ‚Üí
         [ ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ] == [ ‚åú ùêπ' ‚åù·∂ú ‚àô ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ A==A' a==a') ] ‚àà ùì¢ùìÆùìΩ‚ÇÄ)) ‚Üí
    ------------------------------------------------------------------------------------------------------
    (VŒ† ùê¥ ùêπ) == (VŒ† ùê¥' ùêπ') ‚àà ùì¢ùìÆùìΩ‚ÇÄ
```
### ùìîùìµ‚ÇÄ Respects ùì¢ùìÆùìΩ‚ÇÄ

This property ensures that the ùìîùìµ‚ÇÄ interpretations of two related type codes in ùì¢ùìÆùìΩ‚ÇÄ are equivalent relations
(cf. `RelFun` module).

```agda
-- -- TODO: to facilitate reuse , factor out the proofs for the Pi cases in the below properties
ùìîùìµ‚ÇÄ-resp-‚äÜ (ùì¢ùìÆùìΩ‚ÇÄ-NE NE==NE') (ùì•Ty-Ne-mem x x‚ÇÅ x‚ÇÇ) =
  ùì•Ty-Ne-mem (per-trans (per-sym NE==NE') x) ((per-trans (per-sym NE==NE') x‚ÇÅ)) x‚ÇÇ
ùìîùìµ‚ÇÄ-resp-‚äÜ ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ = Œª z ‚Üí z
ùìîùìµ‚ÇÄ-resp-‚äÜ ùì¢ùìÆùìΩ‚ÇÄ-‚ä§ = Œª z ‚Üí z
ùìîùìµ‚ÇÄ-resp-‚äÜ ùì¢ùìÆùìΩ‚ÇÄ-‚ä• = Œª _ ‚Üí tt
ùìîùìµ‚ÇÄ-resp-‚äÜ (ùì¢ùìÆùìΩ‚ÇÄ-Œ† A==A' F==F') {ùì§‚ÇÄ-Œ† ùê¥ ùêπ} {ùì§‚ÇÄ-Œ† ùê¥' ùêπ'} {f} {f'} ELUPi-f==f' --with F‚ÇÄ==F‚ÇÄ' {{Pi}} {{Pi'}}
--... | F==F'
    = prf
      where
      prf : ‚àÄ{ ùëé ùëé' } ‚Üí ‚àÄ (a==a' : ùìîùìµ‚ÇÄ ‚åú ùê¥' ‚åù·µà ùëé ùëé') ‚Üí  [ f == f' ‚àô ùëé == ùëé' ]‚àà ùìîùìµ‚ÇÄ ‚åú ‚åú ùêπ' ‚åù·∂ú ‚àôÀ° a==a' ‚åù
      prf ELUA'-a==a' with ùìîùìµ‚ÇÄ-resp-‚äá  A==A' ELUA'-a==a'
      ... | ELUA-a==a' with ELUPi-f==f' ELUA-a==a' | ùìîùìµ‚ÇÄ-resp-‚äÜ (F==F' ELUA-a==a') | cod-unif¬≤ ELUA'-a==a'
      ... | [‚Åà-rel ELUFa-b==b' ] | IH-cod | _ , ELUF'a'‚Üía
            rewrite cod-unif¬π (mem ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ A==A' ELUA-a==a')) (mem ≥ ELUA'-a==a')
            = [‚Åà-rel ELUF'a'‚Üía (IH-cod ELUFa-b==b') ]

ùìîùìµ‚ÇÄ-resp-‚äá (ùì¢ùìÆùìΩ‚ÇÄ-NE NE==NE') (ùì•Ty-Ne-mem x‚ÇÅ x‚ÇÇ x‚ÇÉ) =
  ùì•Ty-Ne-mem (per-trans NE==NE' x‚ÇÅ) (per-trans NE==NE' x‚ÇÇ) x‚ÇÉ
ùìîùìµ‚ÇÄ-resp-‚äá ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ = Œª z ‚Üí z
ùìîùìµ‚ÇÄ-resp-‚äá ùì¢ùìÆùìΩ‚ÇÄ-‚ä§ = Œª z ‚Üí z
ùìîùìµ‚ÇÄ-resp-‚äá ùì¢ùìÆùìΩ‚ÇÄ-‚ä• = Œª z ‚Üí z
ùìîùìµ‚ÇÄ-resp-‚äá (ùì¢ùìÆùìΩ‚ÇÄ-Œ† A==A' F‚ÇÄ==F‚ÇÄ') {ùì§‚ÇÄ-Œ† ùê¥ ùêπ {{Pi}}} {ùì§‚ÇÄ-Œ† ùê¥' ùêπ' {{Pi'}}} {f} {f'} ELUPi-f==f' with F‚ÇÄ==F‚ÇÄ' {{Pi}} {{Pi'}}
... | F==F' = prf
      where
      prf : ‚àÄ{ ùëé ùëé' } ‚Üí ‚àÄ (a==a' : ùìîùìµ‚ÇÄ ‚åú ùê¥ ‚åù·µà ùëé ùëé') ‚Üí  [ f == f' ‚àô ùëé == ùëé' ]‚àà ùìîùìµ‚ÇÄ ‚åú ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ‚åù
      prf ELUA-a==a' with ùìîùìµ‚ÇÄ-resp-‚äÜ  A==A' ELUA-a==a'
      ... | ELUA'-a==a' with ELUPi-f==f' ELUA'-a==a' | ùìîùìµ‚ÇÄ-resp-‚äá (F==F' ELUA-a==a') | cod-unif¬≤ ELUA'-a==a'
      ... | [‚Åà-rel ELUF'a-b==b' ] | IH-cod | ELUF'a‚Üía' , _
            rewrite cod-unif¬π (mem ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ A==A' ELUA-a==a')) (mem ≥ ELUA'-a==a')
           = [‚Åà-rel IH-cod (ELUF'a‚Üía' ELUF'a-b==b') ]
```
### Proof that ùì¢ùìÆùìΩ‚ÇÄ is a PER
```agda
Set0-sym : ‚àÄ{ùê¥ ùêµ} ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ‚ÇÄ ‚Üí ùêµ == ùê¥ ‚àà ùì¢ùìÆùìΩ‚ÇÄ
Set0-sym (ùì¢ùìÆùìΩ‚ÇÄ-NE x) = ùì¢ùìÆùìΩ‚ÇÄ-NE (per-sym x)
Set0-sym ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ      = ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ
Set0-sym ùì¢ùìÆùìΩ‚ÇÄ-‚ä§      = ùì¢ùìÆùìΩ‚ÇÄ-‚ä§
Set0-sym ùì¢ùìÆùìΩ‚ÇÄ-‚ä•      = ùì¢ùìÆùìΩ‚ÇÄ-‚ä•
Set0-sym (ùì¢ùìÆùìΩ‚ÇÄ-Œ† {ùê¥} {ùêπ} {ùê¥'} {ùêπ'} A==A' {UF} {UF'} F==F') = ùì¢ùìÆùìΩ‚ÇÄ-Œ† A'==A {UF'} {UF} F'==F
   where
     A'==A : ùì¢ùìÆùìΩ‚ÇÄ ùê¥' ùê¥
     A'==A = Set0-sym A==A'
     F'==F : ‚àÄ {{Pi'  : Œ†-‚ü® ùì§‚ÇÄ , ùìîùìµ‚ÇÄ ‚ü© ùê¥' ùêπ'}} ‚Üí {{Pi : Œ†-‚ü® ùì§‚ÇÄ , ùìîùìµ‚ÇÄ ‚ü© ùê¥ ùêπ}} ‚Üí ‚àÄ {a a' : ùïç} ‚Üí
                (a==a' : a == a' ‚àà ùìîùìµ‚ÇÄ ‚åú ùê¥' ‚åù·µà) ‚Üí
                   [ ‚åú ùêπ' ‚åù·∂ú ‚àôÀ° a==a' ] == [ ‚åú ùêπ ‚åù·∂ú ‚àô ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ A'==A a==a') ] ‚àà ùì¢ùìÆùìΩ‚ÇÄ
     F'==F ELUA'-a==a' with ùìîùìµ‚ÇÄ-resp-‚äÜ A'==A  ELUA'-a==a'
     ... | ELUA-a==a' with Set0-sym (F==F' (ùìîùìµ‚ÇÄ-sym ‚åú ùê¥ ‚åù·µà ELUA-a==a'))
     ... | UF'a'==UFa rewrite cod-unif¬π (mem ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ A==A' (ùìîùìµ‚ÇÄ-sym ‚åú ùê¥ ‚åù·µà ELUA-a==a'))) (memÀ° ELUA'-a==a')
                            | cod-unif¬π (mem ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ (Set0-sym A==A') ELUA'-a==a')) (memÀ° (ùìîùìµ‚ÇÄ-sym ‚åú ùê¥ ‚åù·µà ELUA-a==a'))
           = UF'a'==UFa

Set0-trans : ‚àÄ{ùê¥ ùêµ ùê∂} ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ‚ÇÄ ‚Üí ùêµ == ùê∂ ‚àà ùì¢ùìÆùìΩ‚ÇÄ ‚Üí ùê¥ == ùê∂ ‚àà ùì¢ùìÆùìΩ‚ÇÄ
Set0-trans (ùì¢ùìÆùìΩ‚ÇÄ-NE NE==NE'') (ùì¢ùìÆùìΩ‚ÇÄ-NE NE''==NE') = ùì¢ùìÆùìΩ‚ÇÄ-NE (per-trans NE==NE'' NE''==NE')
Set0-trans ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ = ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ
Set0-trans ùì¢ùìÆùìΩ‚ÇÄ-‚ä§ ùì¢ùìÆùìΩ‚ÇÄ-‚ä§ = ùì¢ùìÆùìΩ‚ÇÄ-‚ä§
Set0-trans ùì¢ùìÆùìΩ‚ÇÄ-‚ä• ùì¢ùìÆùìΩ‚ÇÄ-‚ä• = ùì¢ùìÆùìΩ‚ÇÄ-‚ä•
Set0-trans (ùì¢ùìÆùìΩ‚ÇÄ-Œ† {ùê¥} {ùêπ} {ùê¥''} {ùêπ''} A==A'' {PiAF} {ùì§‚ÇÄ-Œ† ùê¥'' ùêπ''}  F==F'')
           (ùì¢ùìÆùìΩ‚ÇÄ-Œ† {ùê¥''} {ùêπ''} {ùê¥'} {ùêπ'} A''==A' {_} {PiA'F'} F''==F')
         = ùì¢ùìÆùìΩ‚ÇÄ-Œ† A==A' {PiAF} {PiA'F'} F==F'
   where
     A==A' : ùì¢ùìÆùìΩ‚ÇÄ ùê¥ ùê¥'
     A==A' = Set0-trans A==A'' A''==A'
     F==F' : ‚àÄ {{Pi  : Œ†-‚ü® ùì§‚ÇÄ , ùìîùìµ‚ÇÄ ‚ü© ùê¥ ùêπ}} ‚Üí {{Pi' : Œ†-‚ü® ùì§‚ÇÄ , ùìîùìµ‚ÇÄ ‚ü© ùê¥' ùêπ'}} ‚Üí ‚àÄ {a a' : ùïç} ‚Üí
                (a==a' : a == a' ‚àà ùìîùìµ‚ÇÄ ‚åú ùê¥ ‚åù·µà) ‚Üí
                   [ ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ] == [ ‚åú ùêπ' ‚åù·∂ú ‚àô ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ A==A' a==a') ] ‚àà ùì¢ùìÆùìΩ‚ÇÄ
     F==F' ELUA-a==a'  with (ùìîùìµ‚ÇÄ-resp-‚äÜ A==A'' (ùìîùìµ‚ÇÄ-trans ‚åú ùê¥ ‚åù·µà (ùìîùìµ‚ÇÄ-sym  ‚åú ùê¥ ‚åù·µà ELUA-a==a') ELUA-a==a'))
     ... | ELUA''-a'==a' with  F==F'' ELUA-a==a' | F''==F' ELUA''-a'==a'
     ... | UFa==UF''a' | UF''a'==UF'a' rewrite cod-unif¬π (mem ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ A==A'' ELUA-a==a')) (memÀ° ELUA''-a'==a')
           with Set0-trans UFa==UF''a' UF''a'==UF'a'
     ... | UFa==UF'a' rewrite cod-unif¬π  (mem ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ A''==A' ELUA''-a'==a'))
                                         (mem ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ (Set0-trans A==A'' A''==A') ELUA-a==a'))
           = UFa==UF'a'

instance Per-ùì¢ùìÆùìΩ‚ÇÄ : Per ùì¢ùìÆùìΩ‚ÇÄ
per-sym   {{Per-ùì¢ùìÆùìΩ‚ÇÄ}} = Set0-sym
per-trans {{Per-ùì¢ùìÆùìΩ‚ÇÄ}} = Set0-trans
```
### Relationship between ùì¢ùìÆùìΩ‚ÇÄ and ùì§‚ÇÄ

We prove that type codes related in ùì¢ùìÆùìΩ‚ÇÄ are in the domain of ùìîùìµ‚ÇÄ,
yielding useful projections.
```agda
œÄ‚ÇÄÀ° : ‚àÄ {A B} ‚Üí A == B ‚àà ùì¢ùìÆùìΩ‚ÇÄ ‚Üí ùì§‚ÇÄ A
œÄ‚ÇÄÀ° (ùì¢ùìÆùìΩ‚ÇÄ-NE x) = ùì§‚ÇÄ-NE
œÄ‚ÇÄÀ° ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ = ùì§‚ÇÄ-ùëÅ
œÄ‚ÇÄÀ° ùì¢ùìÆùìΩ‚ÇÄ-‚ä§ = ùì§‚ÇÄ-‚ä§
œÄ‚ÇÄÀ° ùì¢ùìÆùìΩ‚ÇÄ-‚ä• = ùì§‚ÇÄ-‚ä•
œÄ‚ÇÄÀ° (ùì¢ùìÆùìΩ‚ÇÄ-Œ† _ {Pi} _) = Pi

œÄ‚ÇÄ ≥ : ‚àÄ {A B} ‚Üí A == B ‚àà ùì¢ùìÆùìΩ‚ÇÄ ‚Üí ùì§‚ÇÄ B
œÄ‚ÇÄ ≥ = œÄ‚ÇÄÀ° ‚àò Set0-sym
```
# Intermezzo: Abstracting over Universe Levels

To define a universe at level ùìÄ+1, we need to parameterize it
over the previous level. The following record type bundles the requirements
on the previous level. We will carry these around as implicit instance
arguments.

```agda
-- for sanity, bundles the implicit parameters for the definitions
record ‚Üìùïå : Set‚ÇÅ where
  field
    ‚ÜìùìÄ           : ‚Ñí -- predecessor level, i.e., our level is suc ‚ÜìùìÄ
    ‚Üìùì§           : ùïç ‚Üí Set --type codes at level ‚ÜìùìÄ
    ‚Üìùìîùìµ          : ‚àÄ {ùê¥ : ùïç} ‚Üí ‚Üìùì§ ùê¥ ‚Üí Rel -- interpretation function at level ‚ÜìùìÄ
    ‚Üìùì¢ùìÆùìΩ         : Rel -- PER of type codes at level ‚ÜìùìÄ
    -- properties at level ‚ÜìùìÄ
    ‚Üìùìîùìµ-resp-‚äÜ   : Respect‚äÜ {‚Üìùì§} ‚Üìùìîùìµ ‚Üìùì¢ùìÆùìΩ
    ‚Üìùìîùìµ-resp-‚äá   : Respect‚äá {‚Üìùì§} ‚Üìùìîùìµ ‚Üìùì¢ùìÆùìΩ
    ‚Üìùìîùìµ-unif     : ‚àÄ{ùê¥} ‚Üí (prf prf' : ‚Üìùì§ ùê¥) ‚Üí ‚Üìùìîùìµ prf ‚â°·¥ø ‚Üìùìîùìµ prf'
    ‚Üìùì§-ùëÜùëíùë°       : ‚àÄ{ùìÅ} ‚Üí ùìÅ <‚Ä≤ ‚ÜìùìÄ ‚Üí ‚Üìùì§ (·∂ú (VùëÜùëíùë° ùìÅ))
    ‚ÜìœÄÀ°          : ‚àÄ {A B} ‚Üí A == B ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí ‚Üìùì§ A
    ‚ÜìœÄ ≥          : ‚àÄ {A B} ‚Üí A == B ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí ‚Üìùì§ B
    ‚Üìùì§‚Üí‚Üìùì¢ùìÆùìΩ      : ‚àÄ {ùê¥} ‚Üí ‚Üìùì§ ùê¥ ‚Üí ùê¥ == ùê¥ ‚àà ‚Üìùì¢ùìÆùìΩ --TODO: prove for all levels
    Per-‚Üìùìîùìµ      : ‚àÄ {ùê¥} ‚Üí (UA : ‚Üìùì§ ùê¥) ‚Üí Per (‚Üìùìîùìµ UA)
    {{Per-‚Üìùì¢ùìÆùìΩ}} : Per ‚Üìùì¢ùìÆùìΩ
    --TODO demand projections from Set to U
open ‚Üìùïå {{...}}
```
# PERs at Higher Universe Levels

The PER interpretations for `ùëÜùëíùë° ùìÅ` and abstract types `‚ü®Type ùëÜ ‚ãØ ùëá‚ü©` only exist
at universe levels `ùìÄ > 0`, and thus depend on an immediate predeccesor universe `‚Üìùïå`,
which is why their definitions are relatively late to the party.

## Interpretation of (VùëÜùëíùë° ùìÅ), for ùìÅ <‚Ä≤ (suc ‚ÜìùìÄ)

```agda
ùì•Set : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí ‚àÄ{ùìÅ} ‚Üí ùìÅ <‚Ä≤ (suc ‚ÜìùìÄ) ‚Üí Rel
ùì•Set ‚â§‚Ä≤-refl = ‚Üìùì¢ùìÆùìΩ -- either the universe immediately below
ùì•Set (‚â§‚Ä≤-step ùìÅ<‚ÜìùìÄ) = ‚Üìùìîùìµ (‚Üìùì§-ùëÜùëíùë° ùìÅ<‚ÜìùìÄ) -- or delegate to below's interpretation fun for smaller universes

Per-ùì•Set : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí ‚àÄ{ùìÅ} ‚Üí (lt : ùìÅ <‚Ä≤ (suc ‚ÜìùìÄ)) ‚Üí Per (ùì•Set lt)
per-sym   {{Per-ùì•Set {_} ‚â§‚Ä≤-refl}}        = per-sym   {{Per-‚Üìùì¢ùìÆùìΩ}}
per-sym   {{Per-ùì•Set {_} (‚â§‚Ä≤-step ùìÅ<‚ÜìùìÄ)}} = per-sym   {{Per-‚Üìùìîùìµ (‚Üìùì§-ùëÜùëíùë° ùìÅ<‚ÜìùìÄ)}}
per-trans {{Per-ùì•Set {_} ‚â§‚Ä≤-refl}}        = per-trans {{Per-‚Üìùì¢ùìÆùìΩ}}
per-trans {{Per-ùì•Set {_} (‚â§‚Ä≤-step ùìÅ<‚ÜìùìÄ)}} = per-trans {{Per-‚Üìùìîùìµ (‚Üìùì§-ùëÜùëíùë° ùìÅ<‚ÜìùìÄ)}}

```
## Interpretation of Bounded Abstract Types ‚ü®Type ùëÜ ‚ãØ ùëá ‚ü©

By virtue of predicativity, we can encode the meaning of an abstract type
in the "intuitive way", i.e.,

    ‚ü¶ { Type S..T } ‚üß·µè‚Å∫¬π = { (Type ùëã , Type ùëã') | ùëã == ùëã' ‚àà Set k ‚àß ‚ü¶ S ‚üß·µè ‚äÜ ‚ü¶ ùëã ‚üß·µè ‚äÜ ‚ü¶ T ‚üß·µè }

The semantics of abstract types just contains concrete type values,
whose interpretations are "sandwiched" between the interpretations of
the bounds.  Since we work with PERs, our definition accounts for
pairs of type values. The additional condition ùëã == ùëã' ‚àà Set k ensures
that ‚ü¶ ùëã ‚üß·µè = ‚ü¶ ùëã' ‚üß·µè, implying that both are sandwiched in the same manner.

Notably, we have replaced the weird step-indexing from the ECOOP paper with
reference to the previous universe level, plain and simple.

The following data type models the interpretation of abstract types with bounds `ùëÜ` and `ùëá`
at some universe level ùìÄ+1:

```agda
data ùì•Type {{ùîò‚Çñ : ‚Üìùïå}} (ùëÜ ùëá : ùïç) : Rel
```
### Sandwiches
We factor out the defining property of an abstract type using the following "sandwich" type,
bon appetit!
```agda
‚ü¶_<:_<:_‚üß : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí ‚àÄ(ùëÜ ùëã ùëá : ùïç) ‚Üí Set
```
Intuitively, `‚ü¶ ùëÜ <: ùëã <: ùëá ‚üß` states that at level ùìÄ+1, the ùìÄ interpretation of ùëã
is between the ùìÄ interpretations of ùëÜ and ùëá, by set inclusion:
```agda
‚ü¶ ùëÜ <: ùëã <: ùëá ‚üß =  ‚àÄ(US : ‚Üìùì§ ùëÜ) ‚Üí ‚àÄ(UX : ‚Üìùì§ ùëã) ‚Üí ‚àÄ(UT : ‚Üìùì§ ùëá) ‚Üí ‚Üìùìîùìµ US ‚äÜ ‚Üìùìîùìµ UX √ó ‚Üìùìîùìµ UX ‚äÜ ‚Üìùìîùìµ UT
```
To keep the subsequent definition of ùì•Type ùëÜ ùëá simple, and to account
for the uniformity/irrelevance of ‚Üìùìîùìµ on ‚Üìùì§, we quantify over all
valid ‚Üìùì§ codes for ùëÜ ùëã ùëá here, assuming that we are instantiating
ùì•Type in a context where such codes are always recoverable for these
parameters.

The following lemma is useful for replacing a sandwich's components with equivalent ones:
```agda
sandwich-== : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí ‚àÄ{ùëÜ ùëã ùëá} ‚Üí ‚ü¶ ùëÜ <: ùëã <: ùëá ‚üß ‚Üí
              ‚àÄ{ùëÜ' ùëã' ùëá'} ‚Üí ùëÜ == ùëÜ' ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí ùëã == ùëã' ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí ùëá == ùëá' ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí
              ‚ü¶ ùëÜ' <: ùëã' <: ùëá' ‚üß
sandwich-== sndwch S==S' X==X' T==T' US' UX' UT' with (‚ÜìœÄÀ° S==S') | (‚ÜìœÄÀ° X==X') | (‚ÜìœÄÀ° T==T')
... | US | UX | UT  with sndwch US UX UT
... | US‚ÜíUX , UX‚ÜíUT with ‚Üìùìîùìµ-resp-‚äá S==S' {US} {US'}
                        | ‚Üìùìîùìµ-resp-‚äÜ X==X' {UX} {UX'}
                        | ‚Üìùìîùìµ-resp-‚äá X==X' {UX} {UX'}
                        | ‚Üìùìîùìµ-resp-‚äÜ T==T' {UT} {UT'}
... | US'‚ÜíUS | UX‚ÜíUX' | UX'‚ÜíUX | UT‚ÜíUT'
      = UX‚ÜíUX' ‚àò US‚ÜíUX ‚àò US'‚ÜíUS , UT‚ÜíUT' ‚àò UX‚ÜíUT ‚àò UX'‚ÜíUX
```
### The PER for Abstract Types

We now have the ingredients to define the interpretation of abstract types
in terms of the following data type:
```agda
-- interpretation of bounded abstract types
data ùì•Type ùëÜ ùëá  where
  -- the case for neutral terms
  ùì•Type-ne : ‚àÄ {NE NE' ùëÜ' ùëá' ùëÜ'' ùëá''} ‚Üí
          -- to ensure PER properties, we reflect at type bounds compatible with ùëÜ ùëá
          ùëÜ == ùëÜ' ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí
          ùëá == ùëá' ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí
          ùëÜ == ùëÜ'' ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí
          ùëá == ùëá'' ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí
          NE == NE' ‚àà ùìëùì∏ùìΩ ‚Üí
          ----------------------------------------------------------------
          ‚Üë‚ü® ‚ü™Type ùëÜ' ‚ãØ ùëá' ‚ü´ ‚ü© NE == ‚Üë‚ü® ‚ü™Type ùëÜ'' ‚ãØ ùëá'' ‚ü´ ‚ü© NE' ‚àà ùì•Type ùëÜ ùëá

  -- The non-neutral case models the sandwich property
  -- ‚ü¶ { Type S..T } ‚üß·µè‚Å∫¬π = { (Type ùê¥ , Type ùê¥') | ùê¥ == ùê¥' ‚àà Set k ‚àß ‚ü¶ S ‚üß·µè ‚äÜ ‚ü¶ ùê¥ ‚üß·µè ‚äÜ ‚ü¶ T ‚üß·µè }.
  ùì•Type-val : ‚àÄ {ùëã ùëã'} ‚Üí
          ùëã == ùëã' ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí
          ‚ü¶ ùëÜ <: ùëã <: ùëá ‚üß ‚Üí
          ------------------------------------------------------
          (VType ùëã) == (VType ùëã') ‚àà ùì•Type ùëÜ ùëá
```
The interpretation indeed is a family of PERs:
```agda
Per-ùì•Type : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí ‚àÄ{ùëÜ ùëá} ‚Üí ‚àÄ(US : ‚Üìùì§ ùëÜ) ‚Üí ‚àÄ(UT : ‚Üìùì§ ùëá) ‚Üí Per (ùì•Type ùëÜ ùëá)
Per.per-sym   (Per-ùì•Type US UT) (ùì•Type-ne S==S' T==T' S==S'' T==T'' NE==NE') = ùì•Type-ne S==S'' T==T'' S==S' T==T' (per-sym NE==NE')
Per.per-sym   (Per-ùì•Type US UT) (ùì•Type-val X==X' S<:X<:T) = ùì•Type-val (per-sym X==X') (sandwich-== S<:X<:T (‚Üìùì§‚Üí‚Üìùì¢ùìÆùìΩ US) X==X' (‚Üìùì§‚Üí‚Üìùì¢ùìÆùìΩ UT))
Per.per-trans (Per-ùì•Type US UT)  (ùì•Type-ne S==S' T==T' S==S'' T==T'' NE==NE') (ùì•Type-ne _ _ S==S''' T==T''' NE'==NE'') =
    ùì•Type-ne S==S' T==T' S==S''' T==T''' (per-trans NE==NE' NE'==NE'')
Per.per-trans (Per-ùì•Type US UT) (ùì•Type-val X==X' S<:X<:T) (ùì•Type-val X'==X'' S<:X'<:T) = ùì•Type-val (per-trans X==X' X'==X'') S<:X<:T
```
# Universe Level ùìÄ+1

The definitions are similar to universe level 0, with additional cases for abstract types and ùëÜùëíùë° ùìÅ where
we need to refer to the predecessor universe at ùìÄ.

## Single Type Codes `ùì§‚Çñ‚Çä‚ÇÅ` and Interpretation Function `ùìîùìµ‚Çñ‚Çä‚ÇÅ`.

```agda
data ùì§‚Çñ‚Çä‚ÇÅ {{ùîò‚Çñ : ‚Üìùïå}} :  ùïç ‚Üí Set
ùìîùìµ‚Çñ‚Çä‚ÇÅ : {ùê¥ : ùïç} ‚Üí {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí ùì§‚Çñ‚Çä‚ÇÅ {{ùîò‚Çñ}} ùê¥ ‚Üí Rel

data ùì§‚Çñ‚Çä‚ÇÅ  where
  ùì§‚Çñ‚Çä‚ÇÅ-NE : ‚àÄ{NE ùìÅ} ‚Üí ùìÅ ‚â§‚Ä≤ (suc ‚ÜìùìÄ) ‚Üí
    ---------------------------------
    ùì§‚Çñ‚Çä‚ÇÅ (‚Üë‚ü® (·∂ú (VùëÜùëíùë° ùìÅ)) ‚ü© NE)

  ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ : ùì§‚Çñ‚Çä‚ÇÅ (·∂ú VùëÅ)

  ùì§‚Çñ‚Çä‚ÇÅ-‚ä§ : ùì§‚Çñ‚Çä‚ÇÅ (·∂ú V‚ä§)

  ùì§‚Çñ‚Çä‚ÇÅ-‚ä• : ùì§‚Çñ‚Çä‚ÇÅ (·∂ú V‚ä•)

  ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ : ‚àÄ{ùëÜ ùëá} ‚Üí
    ‚Üìùì§ ùëÜ ‚Üí
    ‚Üìùì§ ùëá ‚Üí -- ‚Üìùìîùìµ US ‚äÜ ‚Üìùìîùìµ UT
    -------------------
    ùì§‚Çñ‚Çä‚ÇÅ ‚ü™Type ùëÜ ‚ãØ ùëá ‚ü´

  ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< : ‚àÄ{ùìÅ} ‚Üí ùìÅ <‚Ä≤ (suc ‚ÜìùìÄ) ‚Üí
    ùì§‚Çñ‚Çä‚ÇÅ (·∂ú (VùëÜùëíùë° ùìÅ))

  ùì§‚Çñ‚Çä‚ÇÅ-Œ† : ‚àÄ ùê¥ ùêπ ‚Üí
    {{Pi : Œ†-‚ü® ùì§‚Çñ‚Çä‚ÇÅ , ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚ü© ùê¥ ùêπ}} ‚Üí
    ---------------------------------
    ùì§‚Çñ‚Çä‚ÇÅ (VŒ† ùê¥ ùêπ)

ùìîùìµ‚Çñ‚Çä‚ÇÅ (ùì§‚Çñ‚Çä‚ÇÅ-NE {NE} {ùìÅ} _) = ùì•Ty-Ne ùìÅ NE
ùìîùìµ‚Çñ‚Çä‚ÇÅ  ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ               = ùìùùì™ùìΩ
ùìîùìµ‚Çñ‚Çä‚ÇÅ  ùì§‚Çñ‚Çä‚ÇÅ-‚ä•               = ùì•‚ä•
ùìîùìµ‚Çñ‚Çä‚ÇÅ  ùì§‚Çñ‚Çä‚ÇÅ-‚ä§               = ùì•‚ä§
ùìîùìµ‚Çñ‚Çä‚ÇÅ (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ {ùëÜ} {ùëá} US UT)  = ùì•Type ùëÜ ùëá
ùìîùìµ‚Çñ‚Çä‚ÇÅ (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ùìÅ‚â§‚ÜìùìÄ)      = ùì•Set ùìÅ‚â§‚ÜìùìÄ
ùìîùìµ‚Çñ‚Çä‚ÇÅ (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ)          = ‚Ñø (ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà) (Œª ùëé ‚Üí ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùêπ ¬∑ ùëé ‚åù·∂ú)
```
### ùìîùìµ‚Çñ‚Çä‚ÇÅ Interprets Type Codes as PERs
```agda
-- for each type ùê¥ in the universe ùì§‚Çñ‚Çä‚ÇÅ, its interpretation is a PER
ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym : ‚àÄ {ùê¥} ‚Üí {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí (UA : ùì§‚Çñ‚Çä‚ÇÅ ùê¥) ‚Üí Sym (ùìîùìµ‚Çñ‚Çä‚ÇÅ UA)
ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym (ùì§‚Çñ‚Çä‚ÇÅ-NE _)            = per-sym
ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym  ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ                = per-sym
ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym  ùì§‚Çñ‚Çä‚ÇÅ-‚ä§                = per-sym
ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym  ùì§‚Çñ‚Çä‚ÇÅ-‚ä• {a} {b}        = per-sym {{Per-ùì•‚ä•}} {a} {b}
ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ U‚ÇñS U‚ÇñT) = per-sym {{Per-ùì•Type U‚ÇñS U‚ÇñT}}
ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ùìÅ‚â§‚ÜìùìÄ)       = per-sym {{Per-ùì•Set ùìÅ‚â§‚ÜìùìÄ}}
ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ)           = ‚Ñø-sym (ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym  ‚åú ùê¥ ‚åù·µà) ‚åú ùêπ ‚åù·∂ú (Œª a==a' ‚Üí ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym ‚åú ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ‚åù)

ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans : ‚àÄ {ùê¥} ‚Üí {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí (UA : ùì§‚Çñ‚Çä‚ÇÅ ùê¥) ‚Üí Trans (ùìîùìµ‚Çñ‚Çä‚ÇÅ UA)
ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans (ùì§‚Çñ‚Çä‚ÇÅ-NE _)            = per-trans
ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans  ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ                = per-trans
ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans  ùì§‚Çñ‚Çä‚ÇÅ-‚ä§                = per-trans
ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans  ùì§‚Çñ‚Çä‚ÇÅ-‚ä• {a} {b} {c}    = per-trans {{Per-ùì•‚ä•}} {a} {b} {c}
ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ U‚ÇñS U‚ÇñT) = per-trans {{Per-ùì•Type U‚ÇñS U‚ÇñT}}
ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ùìÅ‚â§‚ÜìùìÄ)       = per-trans {{Per-ùì•Set ùìÅ‚â§‚ÜìùìÄ}}
ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ)           = ‚Ñø-trans (ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym ‚åú ùê¥ ‚åù·µà) (ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans ‚åú ùê¥ ‚åù·µà) ‚åú ùêπ ‚åù·∂ú (Œª a==a' ‚Üí ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans ‚åú ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ‚åù)

Per-ùìîùìµ‚Çñ‚Çä‚ÇÅ : ‚àÄ {ùê¥} ‚Üí {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí (UA : ùì§‚Çñ‚Çä‚ÇÅ ùê¥) ‚Üí Per (ùìîùìµ‚Çñ‚Çä‚ÇÅ UA)
Per.per-sym   (Per-ùìîùìµ‚Çñ‚Çä‚ÇÅ UA) = ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym UA
Per.per-trans (Per-ùìîùìµ‚Çñ‚Çä‚ÇÅ UA) = ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans UA
```
### Uniformity of ùìîùìµ‚Çñ‚Çä‚ÇÅ
```agda
ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí ‚àÄ{ùê¥} ‚Üí (prf prf' : ùì§‚Çñ‚Çä‚ÇÅ ùê¥) ‚Üí ùìîùìµ‚Çñ‚Çä‚ÇÅ prf ‚â°·¥ø ùìîùìµ‚Çñ‚Çä‚ÇÅ prf'
ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif (ùì§‚Çñ‚Çä‚ÇÅ-NE x) (ùì§‚Çñ‚Çä‚ÇÅ-NE x‚ÇÅ) = ‚â°‚Üí‚â°·¥ø refl
ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ = ‚â°‚Üí‚â°·¥ø refl
ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif ùì§‚Çñ‚Çä‚ÇÅ-‚ä§ ùì§‚Çñ‚Çä‚ÇÅ-‚ä§ = ‚â°‚Üí‚â°·¥ø refl
ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif ùì§‚Çñ‚Çä‚ÇÅ-‚ä• ùì§‚Çñ‚Çä‚ÇÅ-‚ä• = ‚â°‚Üí‚â°·¥ø refl
ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< x) (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< x‚ÇÅ) rewrite ‚â§‚Ä≤-irrelevant x x‚ÇÅ = ‚â°‚Üí‚â°·¥ø refl
ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ _ _) (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ _ _) = ‚â°‚Üí‚â°·¥ø refl
ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{Pi}}) (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{Pi'}}) with Œ†-dom {{Pi}} | Œ†-dom {{Pi'}} | Œ†-cod {{Pi}} | Œ†-cod {{Pi'}}
... | Uùê¥ | Uùê¥' | Uùêπ | Uùêπ' with ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif Uùê¥ Uùê¥'
... | ElUA‚äÜElUA' , ElUA'‚äÜElUA        = left , right
  where
    left :  ‚Ñø (ùìîùìµ‚Çñ‚Çä‚ÇÅ Uùê¥) (Œª ùëé ‚Üí ùìîùìµ‚Çñ‚Çä‚ÇÅ (‚Åà (Uùêπ ùëé))) ‚äÜ ‚Ñø (ùìîùìµ‚Çñ‚Çä‚ÇÅ Uùê¥') (Œª ùëé ‚Üí ùìîùìµ‚Çñ‚Çä‚ÇÅ (‚Åà (Uùêπ' ùëé)))
    left Œ†UAUF-f==f' ELUA'a==a' with Œ†UAUF-f==f' (ElUA'‚äÜElUA  ELUA'a==a')
    ... | [‚Åà-rel ELUFa-fa==f'a' ] with ((Uùêπ (memÀ° (ElUA'‚äÜElUA ELUA'a==a')))) | ((Uùêπ' (memÀ° ELUA'a==a')))
    ... | record { ‚Åà = Fa-1 ;  ‚Åà-eval = Fa‚áì-1} | record { ‚Åà = Fa-2 ; ‚Åà-eval = Fa‚áì-2}
          rewrite det-¬∑ Fa‚áì-2 Fa‚áì-1
          with ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif Fa-2 Fa-1
    ... | _ , conv = [‚Åà-rel (conv ELUFa-fa==f'a') ]
    right : ‚Ñø (ùìîùìµ‚Çñ‚Çä‚ÇÅ Uùê¥') (Œª ùëé ‚Üí ùìîùìµ‚Çñ‚Çä‚ÇÅ (‚Åà (Uùêπ' ùëé))) ‚äÜ ‚Ñø (ùìîùìµ‚Çñ‚Çä‚ÇÅ Uùê¥) (Œª ùëé ‚Üí ùìîùìµ‚Çñ‚Çä‚ÇÅ (‚Åà (Uùêπ ùëé)))
    right  Œ†UA'UF'-f==f' ELUAa==a' with Œ†UA'UF'-f==f' (ElUA‚äÜElUA'  ELUAa==a')
    ... | [‚Åà-rel ELUF'a-fa==f'a' ] with ((Uùêπ' (memÀ° (ElUA‚äÜElUA' ELUAa==a')))) | ((Uùêπ (memÀ° ELUAa==a')))
    ... | record { ‚Åà = Fa-1 ;  ‚Åà-eval = Fa‚áì-1} | record { ‚Åà = Fa-2 ; ‚Åà-eval = Fa‚áì-2}
          rewrite det-¬∑ Fa‚áì-2 Fa‚áì-1
          with ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif Fa-2 Fa-1
    ... | _ , conv = [‚Åà-rel (conv ELUF'a-fa==f'a') ]
```
## ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ: The PER Universe of Type Codes at Level ùìÄ+1

Again, analogous to level 0, with cases for Set k and abstract types added.
```agda
data ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {{ùîò‚Çñ : ‚Üìùïå}} : Rel
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí Respect‚äÜ {ùì§‚Çñ‚Çä‚ÇÅ} ùìîùìµ‚Çñ‚Çä‚ÇÅ ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí Respect‚äá {ùì§‚Çñ‚Çä‚ÇÅ} ùìîùìµ‚Çñ‚Çä‚ÇÅ ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ

data ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ where
  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE : ‚àÄ{NE NE' ùìÅ} ‚Üí ùìÅ ‚â§‚Ä≤ (suc ‚ÜìùìÄ) ‚Üí
    NE == NE' ‚àà ùìëùì∏ùìΩ ‚Üí
    ------------------------------------------------------------------------
    ‚Üë‚ü® (·∂ú (VùëÜùëíùë° ùìÅ)) ‚ü© NE == ‚Üë‚ü® (·∂ú (VùëÜùëíùë° ùìÅ)) ‚ü© NE' ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ

  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ : (·∂ú VùëÅ) == (·∂ú VùëÅ) ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ

  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§ : (·∂ú V‚ä§) == (·∂ú V‚ä§) ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ

  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä• : (·∂ú V‚ä•) == (·∂ú V‚ä•) ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ

  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ : ‚àÄ{ùëÜ ùëÜ' ùëá ùëá'} ‚Üí
    ùëÜ == ùëÜ' ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí
    ùëá == ùëá' ‚àà ‚Üìùì¢ùìÆùìΩ ‚Üí
    ------------------------------------------
    ‚ü™Type ùëÜ ‚ãØ ùëá ‚ü´ == ‚ü™Type ùëÜ' ‚ãØ ùëá' ‚ü´ ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ

  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< : ‚àÄ {ùìÅ} ‚Üí ùìÅ <‚Ä≤ (suc ‚ÜìùìÄ) ‚Üí
    (·∂ú (VùëÜùëíùë° ùìÅ)) == (·∂ú (VùëÜùëíùë° ùìÅ)) ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ

  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† : ‚àÄ{ùê¥ ùêπ ùê¥' ùêπ'} ‚Üí
    (A==A' : ùê¥ == ùê¥' ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ) ‚Üí
    {Pi : Œ†-‚ü® ùì§‚Çñ‚Çä‚ÇÅ , ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚ü© ùê¥ ùêπ} ‚Üí --todo unify the set0 version like this
    {Pi' : Œ†-‚ü® ùì§‚Çñ‚Çä‚ÇÅ , ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚ü© ùê¥' ùêπ'} ‚Üí
    (‚àÄ {{Pi  : Œ†-‚ü® ùì§‚Çñ‚Çä‚ÇÅ , ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚ü© ùê¥ ùêπ}} ‚Üí
       {{Pi' : Œ†-‚ü® ùì§‚Çñ‚Çä‚ÇÅ , ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚ü© ùê¥' ùêπ'}} ‚Üí
       (‚àÄ{a a'} ‚Üí (a==a' : a == a' ‚àà ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà) ‚Üí
         [ ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ] == [ ‚åú ùêπ' ‚åù·∂ú ‚àô ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ A==A' {‚åú ùê¥ ‚åù·µà} {‚åú ùê¥' ‚åù·µà} a==a') ] ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ)) ‚Üí
    ------------------------------------------------------------------------------------------------------
    (VŒ† ùê¥ ùêπ) == (VŒ† ùê¥' ùêπ') ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ
```
### ùìîùìµ‚Çñ‚Çä‚ÇÅ Respects ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ
```agda
-- again, agda stumbles in places with implicit parameters, compared to the definitions at universe level 0
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE _ NE==NE') {ùì§‚Çñ‚Çä‚ÇÅ-NE _} {ùì§‚Çñ‚Çä‚ÇÅ-NE _} (ùì•Ty-Ne-mem x x‚ÇÅ x‚ÇÇ) =
  ùì•Ty-Ne-mem (per-trans (per-sym NE==NE') x) ((per-trans (per-sym NE==NE') x‚ÇÅ)) x‚ÇÇ
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ {ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ} {ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ} = Œª z ‚Üí z
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§ {ùì§‚Çñ‚Çä‚ÇÅ-‚ä§} {ùì§‚Çñ‚Çä‚ÇÅ-‚ä§} = Œª z ‚Üí z
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä• {ùì§‚Çñ‚Çä‚ÇÅ-‚ä•} {ùì§‚Çñ‚Çä‚ÇÅ-‚ä•} = Œª _ ‚Üí tt

ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ {S1} {S2} {T1} {T2} S1==S2 T1==T2) {ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìUS1 ‚ÜìUT1} {ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìUS2 ‚ÜìUT2}
             (ùì•Type-ne S1==S1' T1==T1'  S1==S1'' T1==T1'' NE==NE')
               = ùì•Type-ne (per-trans (per-sym S1==S2) S1==S1')
                           (per-trans (per-sym T1==T2) T1==T1')
                           (per-trans (per-sym S1==S2) S1==S1'')
                           (per-trans (per-sym T1==T2) T1==T1'')
                           NE==NE'
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ {S1} {S2} {T1} {T2} ‚ÜìS1==S2 ‚ÜìT1==T2) {ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìUS1 ‚ÜìUT1} {ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìUS2 ‚ÜìUT2}
             (ùì•Type-val X==X' S1<:X<:T1) = ùì•Type-val X==X' (sandwich-== S1<:X<:T1 ‚ÜìS1==S2 (per-refl (memÀ° X==X')) ‚ÜìT1==T2)
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< _) {ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< x} {ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< y} rewrite ‚â§‚Ä≤-irrelevant y x = Œª z ‚Üí z
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† A==A' F==F') {ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ} {ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥' ùêπ'} {f} {f'} ELUPi-f==f' = prf
      where
      prf : ‚àÄ{ ùëé ùëé' } ‚Üí ‚àÄ (a==a' : ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥' ‚åù·µà ùëé ùëé') ‚Üí  [ f == f' ‚àô ùëé == ùëé' ]‚àà ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ‚åú ùêπ' ‚åù·∂ú ‚àôÀ° a==a' ‚åù
      prf ELUA'-a==a' with ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá A==A' {‚åú ùê¥ ‚åù·µà} {‚åú ùê¥' ‚åù·µà} ELUA'-a==a'
      ... | ELUA-a==a' with ELUPi-f==f' ELUA-a==a' | ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ (F==F' ELUA-a==a') | cod-unif¬≤ ELUA'-a==a'
      ... | [‚Åà-rel ELUFa-b==b' ] | IH-cod | _ , ELUF'a'‚Üía
            rewrite cod-unif¬π (mem ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ A==A' {‚åú ùê¥ ‚åù·µà} {‚åú ùê¥' ‚åù·µà} ELUA-a==a')) (mem ≥ ELUA'-a==a')
            = [‚Åà-rel ELUF'a'‚Üía (IH-cod {‚åú ùêπ ¬∑À° ELUA-a==a' ‚åù·∂ú} {‚åú ùêπ' ¬∑ ≥ ELUA'-a==a' ‚åù·∂ú} ELUFa-b==b') ]

ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá  (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE _ NE==NE') {ùì§‚Çñ‚Çä‚ÇÅ-NE _} {ùì§‚Çñ‚Çä‚ÇÅ-NE _} (ùì•Ty-Ne-mem x‚ÇÅ x‚ÇÇ x‚ÇÉ) =
   ùì•Ty-Ne-mem (per-trans NE==NE' x‚ÇÅ) (per-trans NE==NE' x‚ÇÇ) x‚ÇÉ
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ {ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ} {ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ} = Œª z ‚Üí z
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§ {ùì§‚Çñ‚Çä‚ÇÅ-‚ä§} {ùì§‚Çñ‚Çä‚ÇÅ-‚ä§} = Œª z ‚Üí z
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä• {ùì§‚Çñ‚Çä‚ÇÅ-‚ä•} {ùì§‚Çñ‚Çä‚ÇÅ-‚ä•} = Œª z ‚Üí z

ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ {S1} {S2} {T1} {T2} S1==S2 T1==T2) {ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìUS1 ‚ÜìUT1} {ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìUS2 ‚ÜìUT2}
             (ùì•Type-ne S2==S2' T2==T2'  S2==S2'' T2==T2'' NE==NE')
               = ùì•Type-ne (per-trans S1==S2 S2==S2')
                           (per-trans T1==T2 T2==T2')
                           (per-trans S1==S2 S2==S2'')
                           (per-trans T1==T2 T2==T2'')
                           NE==NE'
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ {S1} {S2} {T1} {T2} ‚ÜìS1==S2 ‚ÜìT1==T2) {ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìUS1 ‚ÜìUT1} {ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìUS2 ‚ÜìUT2}
             (ùì•Type-val X==X' S2<:X<:T2) = ùì•Type-val X==X' (sandwich-== S2<:X<:T2 (per-sym ‚ÜìS1==S2) (per-refl (memÀ° X==X')) (per-sym ‚ÜìT1==T2))

ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< _) {ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< x} {ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< y} rewrite ‚â§‚Ä≤-irrelevant y x = Œª z ‚Üí z
ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† A==A' F==F') {ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ} {ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥' ùêπ'} {f} {f'} ELUPi-f==f' = prf
      where
      prf : ‚àÄ{ ùëé ùëé' } ‚Üí ‚àÄ (a==a' : ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà ùëé ùëé') ‚Üí  [ f == f' ‚àô ùëé == ùëé' ]‚àà ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ‚åù
      prf ELUA-a==a' with ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ  A==A' {‚åú ùê¥ ‚åù·µà} {‚åú ùê¥' ‚åù·µà} ELUA-a==a'
      ... | ELUA'-a==a' with ELUPi-f==f' ELUA'-a==a' | ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá (F==F' ELUA-a==a') | cod-unif¬≤ ELUA'-a==a'
      ... | [‚Åà-rel ELUF'a-b==b' ] | IH-cod | ELUF'a‚Üía' , _
            rewrite cod-unif¬π (mem ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ A==A' {‚åú ùê¥ ‚åù·µà} {‚åú ùê¥' ‚åù·µà} ELUA-a==a')) (mem ≥ ELUA'-a==a')
           = [‚Åà-rel IH-cod {‚åú ùêπ ¬∑À° ELUA-a==a' ‚åù·∂ú} {‚åú ùêπ' ¬∑ ≥ ELUA'-a==a' ‚åù·∂ú} (ELUF'a‚Üía' ELUF'a-b==b') ]
```
### Proof that ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ is a PER
```agda
Set‚Çñ‚Çä‚ÇÅ-sym : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí Sym ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ
Set‚Çñ‚Çä‚ÇÅ-sym (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE lt x) = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE lt (per-sym x)
Set‚Çñ‚Çä‚ÇÅ-sym ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ      = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ
Set‚Çñ‚Çä‚ÇÅ-sym ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§      = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§
Set‚Çñ‚Çä‚ÇÅ-sym ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä•      = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä•
Set‚Çñ‚Çä‚ÇÅ-sym (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† {ùê¥} {ùêπ} {ùê¥'} {ùêπ'} A==A' {UF} {UF'} F==F') = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† A'==A {UF'} {UF} F'==F
   where
     A'==A : ùê¥' == ùê¥ ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ
     A'==A = Set‚Çñ‚Çä‚ÇÅ-sym A==A'
     F'==F : ‚àÄ {{Pi'  : Œ†-‚ü® ùì§‚Çñ‚Çä‚ÇÅ , ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚ü© ùê¥' ùêπ'}} ‚Üí {{Pi : Œ†-‚ü® ùì§‚Çñ‚Çä‚ÇÅ , ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚ü© ùê¥ ùêπ}} ‚Üí ‚àÄ {a a' : ùïç} ‚Üí
                (a==a' : a == a' ‚àà ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥' ‚åù·µà) ‚Üí
                   [ ‚åú ùêπ' ‚åù·∂ú ‚àôÀ° a==a' ] == [ ‚åú ùêπ ‚åù·∂ú ‚àô ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ A'==A {‚åú ùê¥' ‚åù·µà} {‚åú ùê¥ ‚åù·µà} a==a') ] ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ
     F'==F ELUA'-a==a' with ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ A'==A {‚åú ùê¥' ‚åù·µà} {‚åú ùê¥ ‚åù·µà} ELUA'-a==a'
     ... | ELUA-a==a' with Set‚Çñ‚Çä‚ÇÅ-sym (F==F' (ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym ‚åú ùê¥ ‚åù·µà ELUA-a==a'))
     ... | UF'a'==UFa rewrite cod-unif¬π (mem ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ A==A' {‚åú ùê¥ ‚åù·µà} {‚åú ùê¥' ‚åù·µà} (ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym ‚åú ùê¥ ‚åù·µà ELUA-a==a'))) (memÀ° ELUA'-a==a')
                            | cod-unif¬π (memÀ° (ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym  ‚åú ùê¥ ‚åù·µà ELUA-a==a')) (mem ≥ ELUA-a==a')
           = UF'a'==UFa
Set‚Çñ‚Çä‚ÇÅ-sym (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìS==S' ‚ÜìT==T') = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ (per-sym ‚ÜìS==S') (per-sym ‚ÜìT==T')
Set‚Çñ‚Çä‚ÇÅ-sym (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< lt) = (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< lt)

Set‚Çñ‚Çä‚ÇÅ-trans : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí Trans ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ
Set‚Çñ‚Çä‚ÇÅ-trans (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE lt NE==NE'') (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE _ NE''==NE') = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE lt (per-trans NE==NE'' NE''==NE')
Set‚Çñ‚Çä‚ÇÅ-trans ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ
Set‚Çñ‚Çä‚ÇÅ-trans ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§ ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§ = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§
Set‚Çñ‚Çä‚ÇÅ-trans ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä• ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä• = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä•
Set‚Çñ‚Çä‚ÇÅ-trans (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† {ùê¥} {ùêπ} {ùê¥''} {ùêπ''} A==A'' {PiAF}  {Pi''}  F==F'')
            (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† {ùê¥''} {ùêπ''} {ùê¥'} {ùêπ'} A''==A' {_} {PiA'F'} F''==F')
         = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† A==A' {PiAF} {PiA'F'} F==F'
   where
     A==A' : ùê¥ == ùê¥' ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ
     A==A' = Set‚Çñ‚Çä‚ÇÅ-trans A==A'' A''==A'
     F==F' : ‚àÄ {{Pi  : Œ†-‚ü® ùì§‚Çñ‚Çä‚ÇÅ , ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚ü© ùê¥ ùêπ}} ‚Üí {{Pi' : Œ†-‚ü® ùì§‚Çñ‚Çä‚ÇÅ , ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚ü© ùê¥' ùêπ'}} ‚Üí ‚àÄ {a a' : ùïç} ‚Üí
                (a==a' : a == a' ‚àà ùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà) ‚Üí
                   [ ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ] == [ ‚åú ùêπ' ‚åù·∂ú ‚àô ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ A==A' {‚åú ùê¥ ‚åù·µà} {‚åú ùê¥' ‚åù·µà} a==a') ] ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ
     F==F' {{Pi}} {{Pi'}} ELUA-a==a'  with (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ A==A'' {‚åú ùê¥ ‚åù·µà} {Œ†-dom {{Pi''}}} (ùìîùìµ‚Çñ‚Çä‚ÇÅ-trans ‚åú ùê¥ ‚åù·µà (ùìîùìµ‚Çñ‚Çä‚ÇÅ-sym  ‚åú ùê¥ ‚åù·µà ELUA-a==a') ELUA-a==a'))
     ... | ELUA''-a'==a' with  F==F'' {{Pi}} {{Pi''}} ELUA-a==a' | F''==F' {{Pi''}} {{Pi'}} ELUA''-a'==a'
     ... | UFa==UF''a' | UF''a'==UF'a' rewrite cod-unif¬π (mem ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ A==A'' {‚åú ùê¥ ‚åù·µà} {Œ†-dom {{Pi''}}} ELUA-a==a')) (memÀ° ELUA''-a'==a')
           with Set‚Çñ‚Çä‚ÇÅ-trans UFa==UF''a' UF''a'==UF'a'
     ... | UFa==UF'a' rewrite cod-unif¬π  (mem ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ A''==A' {Œ†-dom {{Pi''}}} {‚åú ùê¥' ‚åù·µà} ELUA''-a'==a'))
                                         (mem ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ (Set‚Çñ‚Çä‚ÇÅ-trans A==A'' A''==A') {‚åú ùê¥ ‚åù·µà} {‚åú ùê¥' ‚åù·µà} ELUA-a==a'))
           = UFa==UF'a'
Set‚Çñ‚Çä‚ÇÅ-trans (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìS==S'' ‚ÜìT==T'') (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìS''==S' ‚ÜìT''==T') = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ (per-trans ‚ÜìS==S'' ‚ÜìS''==S') (per-trans ‚ÜìT==T'' ‚ÜìT''==T')
Set‚Çñ‚Çä‚ÇÅ-trans (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< lt) (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< _) = (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< lt)

instance Per-ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí Per ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ
per-sym   {{Per-ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {{ùîò‚Çñ}}}} = Set‚Çñ‚Çä‚ÇÅ-sym
per-trans {{Per-ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {{ùîò‚Çñ}}}} = Set‚Çñ‚Çä‚ÇÅ-trans
```
### Relationship between ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ and ùì§‚Çñ‚Çä‚ÇÅ
```agda
œÄ‚Çñ‚Çä‚ÇÅÀ° : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí ‚àÄ {A B} ‚Üí A == B ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ ‚Üí ùì§‚Çñ‚Çä‚ÇÅ A
œÄ‚Çñ‚Çä‚ÇÅÀ° (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE lt _) = ùì§‚Çñ‚Çä‚ÇÅ-NE lt
œÄ‚Çñ‚Çä‚ÇÅÀ° ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ = ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ
œÄ‚Çñ‚Çä‚ÇÅÀ° ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§ = ùì§‚Çñ‚Çä‚ÇÅ-‚ä§
œÄ‚Çñ‚Çä‚ÇÅÀ° ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä• = ùì§‚Çñ‚Çä‚ÇÅ-‚ä•
œÄ‚Çñ‚Çä‚ÇÅÀ° (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ S==S' T==T') = ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ (‚ÜìœÄÀ° S==S') (‚ÜìœÄÀ° T==T')
œÄ‚Çñ‚Çä‚ÇÅÀ° (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< lt) = ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< lt
œÄ‚Çñ‚Çä‚ÇÅÀ° (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† {ùê¥} {ùêπ} _ {Pi} _) = ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{Pi}}

œÄ‚Çñ‚Çä‚ÇÅ ≥ : {{ùîò‚Çñ : ‚Üìùïå}} ‚Üí ‚àÄ {A B} ‚Üí A == B ‚àà ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ ‚Üí ùì§‚Çñ‚Çä‚ÇÅ B
œÄ‚Çñ‚Çä‚ÇÅ ≥ = œÄ‚Çñ‚Çä‚ÇÅÀ° ‚àò per-sym
```
# Indexed Universe Hierarchy

Having defined universe 0 and the successor universe ùìÄ+1 for arbitrary ùìÄ,
we now combine these to a single level-indexed family of universe definitions.
```agda
ùïå   : ‚Ñí ‚Üí ‚Üìùïå
ùïåùìÄ‚ÜìùìÄ‚â° : ‚àÄ ùìÄ ‚Üí (‚Üìùïå.‚ÜìùìÄ (ùïå ùìÄ)) ‚â° ùìÄ -- this is to help agda accept the ‚Üìùì§-ùëÜùëíùë° field of ùïå (suc ùìÄ)
ùì§   : ‚Ñí ‚Üí ùïç ‚Üí Set
ùìîùìµ  : (ùìÄ : ‚Ñí) ‚Üí {ùê¥ : ùïç} ‚Üí ùì§ ùìÄ ùê¥ ‚Üí Rel
ùì¢ùìÆùìΩ : ‚Ñí ‚Üí Rel
```
## Universe Records
```agda
ùïå 0       = record
              { ‚ÜìùìÄ            = zero
              ; ‚Üìùì§            = ùì§‚ÇÄ
              ; ‚Üìùìîùìµ           = ùìîùìµ‚ÇÄ
              ; ‚Üìùì¢ùìÆùìΩ          = ùì¢ùìÆùìΩ‚ÇÄ
              ; ‚Üìùìîùìµ-resp-‚äÜ    = ùìîùìµ‚ÇÄ-resp-‚äÜ
              ; ‚Üìùìîùìµ-resp-‚äá    = ùìîùìµ‚ÇÄ-resp-‚äá
              ; ‚Üìùìîùìµ-unif      = ùìîùìµ‚ÇÄ-unif
              ; ‚Üìùì§-ùëÜùëíùë°        = Œª ()
              ; ‚ÜìœÄÀ°           = œÄ‚ÇÄÀ°
              ; ‚ÜìœÄ ≥           = œÄ‚ÇÄ ≥
              ; ‚Üìùì§‚Üí‚Üìùì¢ùìÆùìΩ       = {!!}
              ; Per-‚Üìùìîùìµ       = Per-ùìîùìµ‚ÇÄ
              ; Per-‚Üìùì¢ùìÆùìΩ      = Per-ùì¢ùìÆùìΩ‚ÇÄ
              }
ùïå (suc ùìÄ) = record
              { ‚ÜìùìÄ            = suc ùìÄ
              ; ‚Üìùì§            = ùì§‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}}
              ; ‚Üìùìîùìµ           = ùìîùìµ‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}}
              ; ‚Üìùì¢ùìÆùìΩ          = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}}
              ; ‚Üìùìîùìµ-resp-‚äÜ    = ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ {{ùïå ùìÄ}}
              ; ‚Üìùìîùìµ-resp-‚äá    = ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äá {{ùïå ùìÄ}}
              ; ‚Üìùìîùìµ-unif      = ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif {{ùïå ùìÄ}}
              ; ‚Üìùì§-ùëÜùëíùë°        = ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°
              ; ‚ÜìœÄÀ°           = œÄ‚Çñ‚Çä‚ÇÅÀ° {{ùïå ùìÄ}}
              ; ‚ÜìœÄ ≥           = œÄ‚Çñ‚Çä‚ÇÅ ≥ {{ùïå ùìÄ}}
              ; ‚Üìùì§‚Üí‚Üìùì¢ùìÆùìΩ       = {!!}
              ; Per-‚Üìùìîùìµ       = Per-ùìîùìµ‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}}
              ; Per-‚Üìùì¢ùìÆùìΩ      = Per-ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}}
              }
                where
                  ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë° : ‚àÄ {ùìÅ} ‚Üí ùìÅ <‚Ä≤ suc ùìÄ ‚Üí ùì§‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}} (·∂ú VùëÜùëíùë° ùìÅ)
                  ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë° with ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< {{ùïå ùìÄ}}
                  ... | f rewrite (ùïåùìÄ‚ÜìùìÄ‚â° ùìÄ) = f
ùïåùìÄ‚ÜìùìÄ‚â° 0 = refl
ùïåùìÄ‚ÜìùìÄ‚â° (suc k) = refl
```
## Type Codes ùì§, Interpretation Function ùìîùìµ, and PER type codes ùì¢ùìÆùìΩ

The definitions and proofs of properties are now straightforward.

```agda
ùì§ 0         = ùì§‚ÇÄ
ùì§ (suc ùìÄ)   = ùì§‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}}
ùìîùìµ 0        = ùìîùìµ‚ÇÄ
ùìîùìµ (suc ùìÄ)  = ùìîùìµ‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}}
ùì¢ùìÆùìΩ 0       = ùì¢ùìÆùìΩ‚ÇÄ
ùì¢ùìÆùìΩ (suc ùìÄ) = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}}

ùì¢ùìÆùìΩ-sym : ‚àÄ{ùìÄ} ‚Üí Sym (ùì¢ùìÆùìΩ ùìÄ)
ùì¢ùìÆùìΩ-sym {zero}  A==B = per-sym A==B
ùì¢ùìÆùìΩ-sym {suc ùìÄ} A==B = per-sym {{Per-ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}}}} A==B

ùì¢ùìÆùìΩ-trans : ‚àÄ{ùìÄ} ‚Üí Trans (ùì¢ùìÆùìΩ ùìÄ)
ùì¢ùìÆùìΩ-trans {zero}  A==B B==C = per-trans A==B B==C
ùì¢ùìÆùìΩ-trans {suc ùìÄ} A==B B==C = per-trans {{Per-ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}}}} A==B B==C

instance Per-ùì¢ùìÆùìΩ : ‚àÄ{ùìÄ} ‚Üí Per (ùì¢ùìÆùìΩ ùìÄ)
per-sym   {{Per-ùì¢ùìÆùìΩ {ùìÄ}}} = ùì¢ùìÆùìΩ-sym {ùìÄ}
per-trans {{Per-ùì¢ùìÆùìΩ {ùìÄ}}} = ùì¢ùìÆùìΩ-trans {ùìÄ}

ùìîùìµ-resp-‚äÜ : ‚àÄ {ùìÄ} ‚Üí Respect‚äÜ {ùì§ ùìÄ} (ùìîùìµ ùìÄ) (ùì¢ùìÆùìΩ ùìÄ)
ùìîùìµ-resp-‚äÜ {zero}  = ùìîùìµ‚ÇÄ-resp-‚äÜ
ùìîùìµ-resp-‚äÜ {suc ùìÄ} = ‚Üìùìîùìµ-resp-‚äÜ {{ùïå (suc ùìÄ)}}
ùìîùìµ-resp-‚äá : ‚àÄ {ùìÄ} ‚Üí Respect‚äá {ùì§ ùìÄ} (ùìîùìµ ùìÄ) (ùì¢ùìÆùìΩ ùìÄ)
ùìîùìµ-resp-‚äá {zero}  = ùìîùìµ‚ÇÄ-resp-‚äá
ùìîùìµ-resp-‚äá {suc ùìÄ} = ‚Üìùìîùìµ-resp-‚äá {{ùïå (suc ùìÄ)}}

Per-ùìîùìµ : ‚àÄ{ùìÄ ùê¥} ‚Üí (UA : ùì§ ùìÄ ùê¥) ‚Üí Per (ùìîùìµ ùìÄ UA)
Per.per-sym   (Per-ùìîùìµ {zero} UA)  = Per.per-sym (Per-ùìîùìµ‚ÇÄ UA)
Per.per-sym   (Per-ùìîùìµ {suc ùìÄ} UA) = Per.per-sym (Per-ùìîùìµ‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}} UA)
Per.per-trans (Per-ùìîùìµ {zero} UA)  = Per.per-trans (Per-ùìîùìµ‚ÇÄ UA)
Per.per-trans (Per-ùìîùìµ {suc ùìÄ} UA) = Per.per-trans (Per-ùìîùìµ‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}} UA)

ùìîùìµ-unif : ‚àÄ{ùìÄ} ‚Üí ‚àÄ{ùê¥} ‚Üí (prf prf' : ùì§ ùìÄ ùê¥) ‚Üí ùìîùìµ ùìÄ prf ‚â°·¥ø ùìîùìµ ùìÄ prf'
ùìîùìµ-unif {zero}  = ùìîùìµ‚ÇÄ-unif
ùìîùìµ-unif {suc ùìÄ} = ‚Üìùìîùìµ-unif {{ùïå (suc ùìÄ)}}
```
# Cumulativity

Here, we prove that our family of universes indeed exhibits cumulativity properties.

## Cumulativity of ùì§ and ùìîùìµ

Once we have a type code in universe ùìÄ, we keep having one in the successor universe:
```agda
ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ : ‚àÄ{ùê¥} ‚Üí (UA : ùì§ 0 ùê¥) ‚Üí (UA' : ùì§ 1 ùê¥)  ‚Üí ùìîùìµ 0 UA ‚äÜ ùìîùìµ 1 UA'
ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ : ‚àÄ{ùê¥} ‚Üí (UA : ùì§ 0 ùê¥) ‚Üí (UA' : ùì§ 1 ùê¥)  ‚Üí ùìîùìµ 1 UA' ‚äÜ ùìîùìµ 0 UA

ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ ùì§‚ÇÄ-NE (ùì§‚Çñ‚Çä‚ÇÅ-NE x) = Œª z ‚Üí z
ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ ùì§‚ÇÄ-ùëÅ ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ = Œª z ‚Üí z
ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ ùì§‚ÇÄ-‚ä§ ùì§‚Çñ‚Çä‚ÇÅ-‚ä§ = Œª z ‚Üí z
ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ ùì§‚ÇÄ-‚ä• ùì§‚Çñ‚Çä‚ÇÅ-‚ä• = Œª z ‚Üí z
ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ (ùì§‚ÇÄ-Œ† ùê¥ ùêπ {{Pi}}) (ùì§‚Çñ‚Çä‚ÇÅ-Œ† .ùê¥ .ùêπ {{Pi'}}) {f} {f'} f==f'‚ààŒ†0 a==a'‚ààEl1 with (ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ (Œ†-dom {{Pi}}) (Œ†-dom {{Pi'}}) a==a'‚ààEl1)
... | a==a'‚ààEl0 with  f==f'‚ààŒ†0 a==a'‚ààEl0
... | [‚Åà-rel fa==f'a'‚ààùêπa ] with Œ†-cod {{Pi}} (memÀ° a==a'‚ààEl0) | Œ†-cod {{Pi'}} (memÀ° a==a'‚ààEl1)
... | record { ‚Åà-val = Fa; ‚Åà-eval = ùêπ¬∑ùëé‚áìFa; ‚Åà = U0Fa }
    | record { ‚Åà-val = Fa1; ‚Åà-eval = ùêπ¬∑ùëé‚áìFa1; ‚Åà = U1Fa } rewrite det-¬∑ ùêπ¬∑ùëé‚áìFa ùêπ¬∑ùëé‚áìFa1
       = [‚Åà-rel ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ U0Fa U1Fa fa==f'a'‚ààùêπa ]

ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ ùì§‚ÇÄ-NE (ùì§‚Çñ‚Çä‚ÇÅ-NE x) = Œª z ‚Üí z
ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ ùì§‚ÇÄ-ùëÅ ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ = Œª z ‚Üí z
ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ ùì§‚ÇÄ-‚ä§ ùì§‚Çñ‚Çä‚ÇÅ-‚ä§ = Œª z ‚Üí z
ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ ùì§‚ÇÄ-‚ä• ùì§‚Çñ‚Çä‚ÇÅ-‚ä• = Œª z ‚Üí z
ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ (ùì§‚ÇÄ-Œ† ùê¥ ùêπ {{Pi}}) (ùì§‚Çñ‚Çä‚ÇÅ-Œ† .ùê¥ .ùêπ {{Pi'}}) f==f'‚ààŒ†1 a==a'‚ààEl0 with (ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ (Œ†-dom {{Pi}}) (Œ†-dom {{Pi'}}) a==a'‚ààEl0)
... | a==a'‚ààEl1 with  f==f'‚ààŒ†1 a==a'‚ààEl1
... | [‚Åà-rel fa==f'a'‚ààùêπa ] with Œ†-cod {{Pi}} (memÀ° a==a'‚ààEl0) | Œ†-cod {{Pi'}} (memÀ° a==a'‚ààEl1)
... | record { ‚Åà-val = Fa; ‚Åà-eval = ùêπ¬∑ùëé‚áìFa; ‚Åà = U0Fa }
    | record { ‚Åà-val = Fa1; ‚Åà-eval = ùêπ¬∑ùëé‚áìFa1; ‚Åà = U1Fa } rewrite det-¬∑ ùêπ¬∑ùëé‚áìFa ùêπ¬∑ùëé‚áìFa1
       = [‚Åà-rel ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ U0Fa U1Fa fa==f'a'‚ààùêπa ]

ùì§‚ÇÄ‚äÜùì§‚ÇÅ   : ‚àÄ{ùê¥} ‚Üí ùì§ 0 ùê¥ ‚Üí ùì§ 1 ùê¥
ùì§‚ÇÄ‚äÜùì§‚ÇÅ (ùì§‚ÇÄ-NE {NE}) = ùì§‚Çñ‚Çä‚ÇÅ-NE {{ùïå 0}} {NE} (‚â§‚Ä≤-step ‚â§‚Ä≤-refl)
ùì§‚ÇÄ‚äÜùì§‚ÇÅ ùì§‚ÇÄ-ùëÅ = ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ
ùì§‚ÇÄ‚äÜùì§‚ÇÅ ùì§‚ÇÄ-‚ä§ = ùì§‚Çñ‚Çä‚ÇÅ-‚ä§
ùì§‚ÇÄ‚äÜùì§‚ÇÅ ùì§‚ÇÄ-‚ä• = ùì§‚Çñ‚Çä‚ÇÅ-‚ä•
ùì§‚ÇÄ‚äÜùì§‚ÇÅ (ùì§‚ÇÄ-Œ† ùê¥ ùêπ {{Pi}}) = ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{Pi'}}
  where
     U1ùê¥ : ùì§ 1 ùê¥
     U1ùê¥ = ùì§‚ÇÄ‚äÜùì§‚ÇÅ ‚åú ùê¥ ‚åù·µà

     U1ùêπ : ‚àÄ {ùëé} ‚Üí ùëé ‚àà ùìîùìµ 1 U1ùê¥ ‚Üí [ ùêπ ‚àô ùëé ]‚àà ùì§ 1
     U1ùêπ a‚ààùìîùìµ0 with ‚åú ùêπ ‚åù·∂ú (‚äÜ‚Üí‚àà (ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ ‚åú ùê¥ ‚åù·µà U1ùê¥) a‚ààùìîùìµ0)
     ... | U0Fa = [‚Åà ùì§‚ÇÄ‚äÜùì§‚ÇÅ ‚åú U0Fa ‚åù ]

     unif¬≤‚äÜ : ‚àÄ {ùëé ùëé'} ‚Üí (a==a' : ùëé == ùëé' ‚àà ùìîùìµ 1 U1ùê¥) ‚Üí
                 ùìîùìµ 1 ‚åú U1ùêπ ‚àôÀ° a==a' ‚åù ‚äÜ ùìîùìµ 1 ‚åú U1ùêπ ‚àô ≥ a==a' ‚åù
     unif¬≤‚äÜ a==a' with (ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ ‚åú ùê¥ ‚åù·µà U1ùê¥ a==a') | U1ùêπ ‚àôÀ° a==a' | U1ùêπ ‚àô ≥ a==a'
     ... | EL1-a==a' | [‚Åà U1Fa ] | [‚Åà U1Fa' ] with cod-unif¬≤ EL1-a==a'
     ... | El0Fa‚ÜíFa' , _ =  (ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ ‚åú ùêπ ¬∑ ≥ EL1-a==a' ‚åù·∂ú (ùì§‚ÇÄ‚äÜùì§‚ÇÅ ‚åú ùêπ ¬∑ ≥ EL1-a==a' ‚åù·∂ú)) ‚àò El0Fa‚ÜíFa' ‚àò (ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ ‚åú ùêπ ¬∑À° EL1-a==a' ‚åù·∂ú (ùì§‚ÇÄ‚äÜùì§‚ÇÅ ‚åú ùêπ ¬∑À° EL1-a==a' ‚åù·∂ú))

     unif¬≤‚äá : ‚àÄ {ùëé ùëé'} ‚Üí (a==a' : ùëé == ùëé' ‚àà ùìîùìµ 1 U1ùê¥) ‚Üí
                 ùìîùìµ 1 ‚åú U1ùêπ ‚àô ≥ a==a' ‚åù ‚äÜ ùìîùìµ 1 ‚åú U1ùêπ ‚àôÀ° a==a' ‚åù
     unif¬≤‚äá a==a' with (ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ ‚åú ùê¥ ‚åù·µà U1ùê¥ a==a') | U1ùêπ ‚àôÀ° a==a' | U1ùêπ ‚àô ≥ a==a'
     ... | EL1-a==a' | [‚Åà U1Fa ] | [‚Åà U1Fa' ] with cod-unif¬≤ EL1-a==a'
     ... | _ , El0Fa'‚ÜíFa =  (ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ ‚åú ùêπ ¬∑À° EL1-a==a' ‚åù·∂ú (ùì§‚ÇÄ‚äÜùì§‚ÇÅ ‚åú ùêπ ¬∑À° EL1-a==a' ‚åù·∂ú) ) ‚àò El0Fa'‚ÜíFa ‚àò (ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ ‚åú ùêπ ¬∑ ≥ EL1-a==a' ‚åù·∂ú (ùì§‚ÇÄ‚äÜùì§‚ÇÅ ‚åú ùêπ ¬∑ ≥ EL1-a==a' ‚åù·∂ú))

     Pi' : Œ†-‚ü® ùì§ 1 , ùìîùìµ 1 ‚ü© ùê¥ ùêπ
     Œ†-dom {{Pi'}} = U1ùê¥
     Œ†-cod {{Pi'}} = U1ùêπ
     cod-unif¬π {{Œ†-props {{Pi'}}}} prf prf'
       rewrite cod-unif¬π (‚äÜ‚Üí‚àà (ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ ‚åú ùê¥ ‚åù·µà U1ùê¥) prf) (‚äÜ‚Üí‚àà (ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ ‚åú ùê¥ ‚åù·µà U1ùê¥) prf') = refl
     cod-unif¬≤ {{Œ†-props {{Pi'}}}} = Œª a==a' ‚Üí (unif¬≤‚äÜ a==a') , (unif¬≤‚äá a==a')

ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ : ‚àÄ{ùê¥ ùêµ} ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ 0 ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ 1
ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ (ùì¢ùìÆùìΩ‚ÇÄ-NE NE==NE') = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE (‚â§‚Ä≤-step ‚â§‚Ä≤-refl) NE==NE'
ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ
ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ ùì¢ùìÆùìΩ‚ÇÄ-‚ä§ = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§
ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ ùì¢ùìÆùìΩ‚ÇÄ-‚ä• = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä•
ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ (ùì¢ùìÆùìΩ‚ÇÄ-Œ† A==A' {ùì§‚ÇÄ-Œ† ùê¥ ùêπ {{Pi}}} {ùì§‚ÇÄ-Œ† ùê¥' ùêπ' {{Pi'}}} F==F') =
  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† {{_}} {ùê¥} {ùêπ} {ùê¥'} {ùêπ'} A==A'+ {Pi+} {Pi'+} F==F'+
    where
      A==A'+ : ùê¥ == ùê¥' ‚àà ùì¢ùìÆùìΩ 1
      A==A'+ = ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ A==A'

      Pi+ : Œ†-‚ü® ùì§ 1 , ùìîùìµ 1 ‚ü© ùê¥ ùêπ
      Pi+ with ùì§‚ÇÄ‚äÜùì§‚ÇÅ (ùì§‚ÇÄ-Œ† ùê¥ ùêπ)
      ... | ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{x}} = x

      Pi'+ : Œ†-‚ü® ùì§ 1 , ùìîùìµ 1 ‚ü© ùê¥' ùêπ'
      Pi'+ with ùì§‚ÇÄ‚äÜùì§‚ÇÅ (ùì§‚ÇÄ-Œ† ùê¥' ùêπ')
      ... | ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥' ùêπ' {{x}} = x

      F==F'+ : ‚¶É Pi0 : Œ†-‚ü® ùì§ 1 , ùìîùìµ 1 ‚ü© ùê¥ ùêπ ‚¶Ñ
               ‚¶É Pi0' : Œ†-‚ü® ùì§ 1 , ùìîùìµ 1 ‚ü© ùê¥' ùêπ' ‚¶Ñ {a a' : ùïç}
               (a==a' : a == a' ‚àà ùìîùìµ 1 ‚åú ùê¥ ‚åù·µà) ‚Üí
                   [ ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ] == [ ‚åú ùêπ' ‚åù·∂ú ‚àô ≥ ùìîùìµ-resp-‚äÜ {1} (ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ A==A') {‚åú ùê¥ ‚åù·µà} {‚åú ùê¥' ‚åù·µà} a==a' ] ‚àà ùì¢ùìÆùìΩ 1
      F==F'+ {{Pi0}} {{Pi0'}} El1A-a==a' with F==F' {{Pi}} {{Pi'}} | ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ (Œ†-dom {{Pi}}) (Œ†-dom {{Pi+}})
      ... | F==F'-PiPi' | El+1Pi‚ÜíEl0Pi with ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif {{ùïå 0}} (Œ†-dom {{Pi0}}) (ùì§‚ÇÄ‚äÜùì§‚ÇÅ (Œ†-dom {{Pi}}))
      ... | El1Pi0‚ÜíEL1Pi , _  with El+1Pi‚ÜíEl0Pi (El1Pi0‚ÜíEL1Pi El1A-a==a')
      ... | El0Pi-a==a' with F==F'-PiPi' El0Pi-a==a'
      ... | Fa==F'a'‚ààSet0 with ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ Fa==F'a'‚ààSet0
      ... | Fa==F'a'‚ààSet1 with (Œ†-cod {{Pi}}) ‚àôÀ° El0Pi-a==a'
                             | (Œ†-cod {{Pi'}}) ‚àô ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ A==A' El0Pi-a==a')
                             | (Œ†-cod {{Pi0}}) ‚àôÀ° El1A-a==a'
                             | (Œ†-cod {{Pi0'}}) ‚àô ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ {{ùïå 0}} A==A'+ {Œ†-dom {{Pi0}}} {Œ†-dom {{Pi0'}}} El1A-a==a')
      ... | record { ‚Åà-eval = F¬∑a‚áìx }
          | record { ‚Åà-eval = F'¬∑a'‚áìy }
          | record { ‚Åà-eval = F¬∑a‚áìx' }
          | record { ‚Åà-eval = F'¬∑a'‚áìy' }
            rewrite det-¬∑ F¬∑a‚áìx' F¬∑a‚áìx | det-¬∑ F'¬∑a'‚áìy' F'¬∑a'‚áìy
            = Fa==F'a'‚ààSet1
```
We also have the _other_ direction in specific circumstances: if
we know that a type code for `ùê¥` already exists in the smaller universe, then
every `ùêµ` it is related to above must already be related to it below.
That is to say, universe levels do not change existing equivalence classes.
```agda
ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ : ‚àÄ{ùê¥ ùêµ} ‚Üí ùì§ 0 ùê¥ ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ 1 ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ 0
ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ {.(‚Üë‚ü® ·∂ú VùëÜùëíùë° 0 ‚ü© _)} {.(‚Üë‚ü® ·∂ú VùëÜùëíùë° 0 ‚ü© _)} ùì§‚ÇÄ-NE     (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE x x‚ÇÅ) = ùì¢ùìÆùìΩ‚ÇÄ-NE x‚ÇÅ
ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ {.(·∂ú VùëÅ)}            {.(·∂ú VùëÅ)}            ùì§‚ÇÄ-ùëÅ       ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ = ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ
ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ {.(·∂ú V‚ä§)}            {.(·∂ú V‚ä§)}            ùì§‚ÇÄ-‚ä§       ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§ = ùì¢ùìÆùìΩ‚ÇÄ-‚ä§
ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ {.(·∂ú V‚ä•)}            {.(·∂ú V‚ä•)}            ùì§‚ÇÄ-‚ä•       ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä• = ùì¢ùìÆùìΩ‚ÇÄ-‚ä•
ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ {.(VŒ† ùê¥ ùêπ)}          {(VŒ† ùê¥' ùêπ')}        (ùì§‚ÇÄ-Œ† ùê¥ ùêπ {{Pi‚ÇÄ}}) (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† A==A'1 {Pi‚ÇÅ} {Pi'‚ÇÅ} F==F'1) with F==F'1 {{Pi‚ÇÅ}} {{Pi'‚ÇÅ}}
... | F==F' =  ùì¢ùìÆùìΩ‚ÇÄ-Œ†  A==A'0 {(ùì§‚ÇÄ-Œ† ùê¥ ùêπ {{Pi‚ÇÄ}})} {U0Œ†A'F'} F==F'0
    where
      A==A'0 : ùê¥ == ùê¥' ‚àà ùì¢ùìÆùìΩ 0
      A==A'0 = ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ (Œ†-dom {{Pi‚ÇÄ}}) A==A'1

      U0A' : ùì§ 0 ùê¥'
      U0A' =  œÄ‚ÇÄ ≥ A==A'0

      U1A' : ùì§ 1 ùê¥'
      U1A' = Œ†-dom {{Pi'‚ÇÅ}}

      F==F'0 : ‚àÄ ‚¶É Pi1 : Œ†-‚ü® ùì§ 0 , ùìîùìµ 0 ‚ü© ùê¥ ùêπ ‚¶Ñ ‚¶É Pi'1 : Œ†-‚ü® ùì§ 0 , ùìîùìµ 0 ‚ü© ùê¥' ùêπ' ‚¶Ñ ‚Üí
               {a a' : ùïç} ‚Üí (a==a' : a == a' ‚àà ùìîùìµ 0 (Œ†-dom {{Pi1}})) ‚Üí
                [ (Œ†-cod {{Pi1}}) ‚àôÀ° a==a' ] == [ (Œ†-cod {{Pi'1}}) ‚àô ≥ ùìîùìµ-resp-‚äÜ {0} A==A'0 a==a' ] ‚àà ùì¢ùìÆùìΩ 0
      F==F'0 {{Pi1}} {{Pi'1}} a==a'El0A with (ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ (Œ†-dom {{Pi1}}) (ùì§‚ÇÄ‚äÜùì§‚ÇÅ (Œ†-dom {{Pi1}})) a==a'El0A)
      ... | a==a'EL1'A with ((proj‚ÇÅ (ùìîùìµ-unif {1} (ùì§‚ÇÄ‚äÜùì§‚ÇÅ (Œ†-dom {{Pi1}})) (Œ†-dom {{Pi‚ÇÅ}}))) a==a'EL1'A)
      ... | a==a'El1A with F==F' a==a'El1A
      ... | Fa==F'a'1 with Œ†-cod {{Pi1}} ‚àôÀ° a==a'El0A
                   | Œ†-cod {{Pi'1}} ‚àô ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ A==A'0 a==a'El0A)
                   | Œ†-cod {{Pi‚ÇÅ}} (memÀ° a==a'El1A)
                   | Œ†-cod {{Pi'‚ÇÅ}} (mem ≥ (ùìîùìµ-resp-‚äÜ {1} A==A'1 {Œ†-dom {{Pi‚ÇÅ}}} {Œ†-dom {{Pi'‚ÇÅ}}} a==a'El1A))
      ... | record { ‚Åà = U0Fa   ; ‚Åà-val = Fa   ; ‚Åà-eval = F¬∑a‚áìFa }
          | record { ‚Åà = U0F'a' ; ‚Åà-val = F'a' ; ‚Åà-eval = F'¬∑a'‚áìF'a' }
          | record { ‚Åà = U1_Fa  ; ‚Åà-val = _Fa  ; ‚Åà-eval = F¬∑a‚áì_Fa }
          | record { ‚Åà = U1_F'a'; ‚Åà-val = _F'a'; ‚Åà-eval = F'¬∑a'‚áì_F'a' }
            rewrite det-¬∑ F¬∑a‚áì_Fa F¬∑a‚áìFa | det-¬∑ F'¬∑a'‚áì_F'a' F'¬∑a'‚áìF'a'
            = ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ U0Fa Fa==F'a'1

      --TODO can this be simplified?
      cod : ‚àÄ {ùëé} ‚Üí ùëé ‚àà ùìîùìµ‚ÇÄ U0A' ‚Üí [ ùêπ' ‚àô ùëé ]‚àà ùì§‚ÇÄ
      cod a‚ààEl0Dom with (‚äÜ‚Üí‚àà (ùìîùìµ-resp-‚äá {0} A==A'0 {Œ†-dom {{Pi‚ÇÄ}}} {U0A'})) a‚ààEl0Dom
                               | ((‚äÜ‚Üí‚àà (ùìîùìµ-resp-‚äá {1} A==A'1 {Œ†-dom {{Pi‚ÇÅ}}} {U1A'})) ‚àò (‚äÜ‚Üí‚àà (ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ U0A' U1A'))) a‚ààEl0Dom
      ... | a‚ààEl0DomA | a‚ààEl1Dom with (per-refl {{Per-ùìîùìµ {1} (Œ†-dom {{Pi‚ÇÅ}})}} a‚ààEl1Dom)
      ... | a==aEl1 with F==F' a==aEl1
      ... | Fa==F'a1 with (ùìîùìµ-resp-‚äÜ {1} A==A'1 {Œ†-dom {{Pi‚ÇÅ}}} {U1A'} a==aEl1)
      ... | a==aElA'1 with (Œ†-cod {{Pi‚ÇÄ}} a‚ààEl0DomA) | Œ†-cod {{Pi‚ÇÅ}} (memÀ° a==aEl1) | Œ†-cod {{Pi'‚ÇÅ}} (mem ≥ a==aElA'1)
      ... | record { ‚Åà = U0Fa; ‚Åà-val = Fa; ‚Åà-eval = F¬∑a‚áìFa }
          | record { ‚Åà = U1Fa; ‚Åà-val = Fa_; ‚Åà-eval = F¬∑a‚áìFa_ }
          | record { ‚Åà = U1F'a; ‚Åà-val = F'a; ‚Åà-eval = F'¬∑a‚áìF'a } rewrite det-¬∑ F¬∑a‚áìFa_ F¬∑a‚áìFa with ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ U0Fa Fa==F'a1
      ... | Fa==F'a0 with œÄ‚ÇÄ ≥ Fa==F'a0
      ... | U0F'a = [‚Åà U0F'a ]

      Pi'‚ÇÄ :  Œ†-‚ü® ùì§ 0 , ùìîùìµ 0 ‚ü© ùê¥' ùêπ'
      Œ†-dom {{Pi'‚ÇÄ}} = U0A'
      Œ†-cod {{Pi'‚ÇÄ}} = cod

      -- TODO: these seem very tedious, we might need a weaker notion of equality for [ ùêπ' ‚àô ùëé ]‚àà ùì§‚ÇÄ
      cod-unif¬π {{Œ†-props {{Pi'‚ÇÄ}}}} prf prf' = {!!}
      cod-unif¬≤ {{Œ†-props {{Pi'‚ÇÄ}}}} a==a'El0A with cod ‚àô ≥ a==a'El0A | cod ‚àôÀ° a==a'El0A
      ... | u | v = {!!}

      U0Œ†A'F' : ùì§ 0 (VŒ† ùê¥' ùêπ')
      U0Œ†A'F' = ùì§‚ÇÄ-Œ† ùê¥' ùêπ' {{Pi'‚ÇÄ}}


ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ : ‚àÄ{ùê¥} ‚Üí (UA : ùì§ 1 ùê¥) ‚Üí(UA' : ùì§ 2 ùê¥)  ‚Üí ùìîùìµ 1 UA ‚äÜ ùìîùìµ 2 UA'
ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ : ‚àÄ{ùê¥} ‚Üí (UA : ùì§ 1 ùê¥) ‚Üí(UA' : ùì§ 2 ùê¥)  ‚Üí ùìîùìµ 2 UA' ‚äÜ ùìîùìµ 1 UA

ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-NE x) (ùì§‚Çñ‚Çä‚ÇÅ-NE x‚ÇÅ) = Œª z ‚Üí z
ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ = Œª z ‚Üí z
ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ ùì§‚Çñ‚Çä‚ÇÅ-‚ä§ ùì§‚Çñ‚Çä‚ÇÅ-‚ä§ = Œª z ‚Üí z
ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ ùì§‚Çñ‚Çä‚ÇÅ-‚ä• ùì§‚Çñ‚Çä‚ÇÅ-‚ä• = Œª z ‚Üí z
-- abstract types are straightforward, we just need to massage the components into the next level, using
-- the coercions from the previous level
ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ U0S U0T) (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ U1S U1T) (ùì•Type-ne S==S'0 T==T'0 S==S''0 T==T''0 NE==NE') =
  ùì•Type-ne (ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ S==S'0) (ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ T==T'0) (ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ S==S''0) (ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ T==T''0) NE==NE'
ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ {ùëÜ} {ùëá} U0S U0T) (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ U1S U1T) (ùì•Type-val {ùëã} X==X'0 S<:‚ÇÄX<:‚ÇÄT) with œÄ‚ÇÄÀ° X==X'0
... | U0X with S<:‚ÇÄX<:‚ÇÄT U0S U0X U0T
... | El0S‚ÜíEl0X , El0X‚ÜíEl0T = ùì•Type-val (ùì¢ùìÆùìΩ‚ÇÄ‚äÜùì¢ùìÆùìΩ‚ÇÅ X==X'0) S<:‚ÇÅX<:‚ÇÅT
  where
     S<:‚ÇÅX<:‚ÇÅT : ‚ü¶_<:_<:_‚üß {{ùïå 1}} ùëÜ ùëã ùëá
     S<:‚ÇÅX<:‚ÇÅT U1S' U1X U1T' = ((ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ U0X U1X) ‚àò El0S‚ÜíEl0X ‚àò (ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ U0S U1S')) , ((ùìîùìµ‚ÇÄ‚äÜùìîùìµ‚ÇÅ U0T U1T') ‚àò El0X‚ÜíEl0T ‚àò (ùìîùìµ‚ÇÄ‚äáùìîùìµ‚ÇÅ U0X U1X))
ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ‚â§‚Ä≤-refl) (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< (‚â§‚Ä≤-step ‚â§‚Ä≤-refl)) = Œª z ‚Üí z
ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{Pi}}) (ùì§‚Çñ‚Çä‚ÇÅ-Œ† .ùê¥ .ùêπ {{Pi'}}) {f} {f'} f==f'‚ààŒ†1 a==a'‚ààEl2 with (ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ (Œ†-dom {{Pi}}) (Œ†-dom {{Pi'}}) a==a'‚ààEl2)
... | a==a'‚ààEl1 with  f==f'‚ààŒ†1 a==a'‚ààEl1
... | [‚Åà-rel fa==f'a'‚ààùêπa ] with Œ†-cod {{Pi}} (memÀ° a==a'‚ààEl1) | Œ†-cod {{Pi'}} (memÀ° a==a'‚ààEl2)
... | record { ‚Åà-val = Fa; ‚Åà-eval = ùêπ¬∑ùëé‚áìFa; ‚Åà = U1Fa }
    | record { ‚Åà-val = Fa2; ‚Åà-eval = ùêπ¬∑ùëé‚áìFa2; ‚Åà = U2Fa } rewrite det-¬∑ ùêπ¬∑ùëé‚áìFa ùêπ¬∑ùëé‚áìFa2
       = [‚Åà-rel ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ U1Fa U2Fa fa==f'a'‚ààùêπa ]

ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-NE x) (ùì§‚Çñ‚Çä‚ÇÅ-NE x‚ÇÅ) = Œª z ‚Üí z
ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ = Œª z ‚Üí z
ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ ùì§‚Çñ‚Çä‚ÇÅ-‚ä§ ùì§‚Çñ‚Çä‚ÇÅ-‚ä§ = Œª z ‚Üí z
ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ ùì§‚Çñ‚Çä‚ÇÅ-‚ä• ùì§‚Çñ‚Çä‚ÇÅ-‚ä• = Œª z ‚Üí z
ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ U0S U0T) (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ U1S U1T) (ùì•Type-ne S==S'1 T==T'1 S==S''1 T==T''1 NE==NE') =
  {!ùì•Type-ne (ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ S==S'1) (ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ T==T'1) (ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ S==S''1) (ùì¢ùìÆùìΩ‚ÇÄ‚äáùì¢ùìÆùìΩ‚ÇÅ T==T''1) NE==NE'!}
ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ U0S U0T) (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ U1S U1T) (ùì•Type-val {ùëã} X==X'1 S<:‚ÇÅX<:‚ÇÅT) = ùì•Type-val {!!} {!!}
ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ‚â§‚Ä≤-refl) (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< (‚â§‚Ä≤-step ‚â§‚Ä≤-refl)) = Œª z ‚Üí z
ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ) (ùì§‚Çñ‚Çä‚ÇÅ-Œ† .ùê¥ .ùêπ) = {!!}

ùì§‚ÇÅ‚äÜùì§‚ÇÇ : ‚àÄ{ùê¥} ‚Üí ùì§ 1 ùê¥ ‚Üí ùì§ 2 ùê¥
ùì§‚ÇÅ‚äÜùì§‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-NE x) = ùì§‚Çñ‚Çä‚ÇÅ-NE (‚â§‚Ä≤-step x)
ùì§‚ÇÅ‚äÜùì§‚ÇÇ ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ = ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ
ùì§‚ÇÅ‚äÜùì§‚ÇÇ ùì§‚Çñ‚Çä‚ÇÅ-‚ä§ = ùì§‚Çñ‚Çä‚ÇÅ-‚ä§
ùì§‚ÇÅ‚äÜùì§‚ÇÇ ùì§‚Çñ‚Çä‚ÇÅ-‚ä• = ùì§‚Çñ‚Çä‚ÇÅ-‚ä•
ùì§‚ÇÅ‚äÜùì§‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìUS ‚ÜìUT) = ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ (ùì§‚ÇÄ‚äÜùì§‚ÇÅ ‚ÜìUS) (ùì§‚ÇÄ‚äÜùì§‚ÇÅ ‚ÜìUT)
ùì§‚ÇÅ‚äÜùì§‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< x) = ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< (‚â§‚Ä≤-step x)
ùì§‚ÇÅ‚äÜùì§‚ÇÇ (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{Pi}}) = ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{Pi'}}
  where
     U2ùê¥ : ùì§ 2 ùê¥
     U2ùê¥ = ùì§‚ÇÅ‚äÜùì§‚ÇÇ ‚åú ùê¥ ‚åù·µà

     U2ùêπ : ‚àÄ {ùëé} ‚Üí ùëé ‚àà ùìîùìµ 2 U2ùê¥ ‚Üí [ ùêπ ‚àô ùëé ]‚àà ùì§ 2
     U2ùêπ a‚ààùìîùìµ1 with ‚åú ùêπ ‚åù·∂ú (‚äÜ‚Üí‚àà (ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ ‚åú ùê¥ ‚åù·µà U2ùê¥) a‚ààùìîùìµ1)
     ... | U1Fa = [‚Åà ùì§‚ÇÅ‚äÜùì§‚ÇÇ ‚åú U1Fa ‚åù ]

     unif¬≤‚äÜ : ‚àÄ {ùëé ùëé'} ‚Üí (a==a' : ùëé == ùëé' ‚àà ùìîùìµ 2 U2ùê¥) ‚Üí
                 ùìîùìµ 2 ‚åú U2ùêπ ‚àôÀ° a==a' ‚åù ‚äÜ ùìîùìµ 2 ‚åú U2ùêπ ‚àô ≥ a==a' ‚åù
     unif¬≤‚äÜ a==a' with (ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ ‚åú ùê¥ ‚åù·µà U2ùê¥ a==a') | U2ùêπ ‚àôÀ° a==a' | U2ùêπ ‚àô ≥ a==a'
     ... | EL2-a==a' | [‚Åà U2Fa ] | [‚Åà U2Fa' ] with cod-unif¬≤ EL2-a==a'
     ... | El1Fa‚ÜíFa' , _ = (ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ ‚åú ùêπ ¬∑ ≥ EL2-a==a' ‚åù·∂ú (ùì§‚ÇÅ‚äÜùì§‚ÇÇ ‚åú ùêπ ¬∑ ≥ EL2-a==a' ‚åù·∂ú)) ‚àò El1Fa‚ÜíFa' ‚àò (ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ ‚åú ùêπ ¬∑À° EL2-a==a' ‚åù·∂ú (ùì§‚ÇÅ‚äÜùì§‚ÇÇ ‚åú ùêπ ¬∑À° EL2-a==a' ‚åù·∂ú))

     unif¬≤‚äá : ‚àÄ {ùëé ùëé'} ‚Üí (a==a' : ùëé == ùëé' ‚àà ùìîùìµ 2 U2ùê¥) ‚Üí
                 ùìîùìµ 2 ‚åú U2ùêπ ‚àô ≥ a==a' ‚åù ‚äÜ ùìîùìµ 2 ‚åú U2ùêπ ‚àôÀ° a==a' ‚åù
     unif¬≤‚äá a==a' with (ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ ‚åú ùê¥ ‚åù·µà U2ùê¥ a==a') | U2ùêπ ‚àôÀ° a==a' | U2ùêπ ‚àô ≥ a==a'
     ... | EL2-a==a' | [‚Åà U2Fa ] | [‚Åà U2Fa' ] with cod-unif¬≤ EL2-a==a'
     ... | _ , El1Fa'‚ÜíFa = (ùìîùìµ‚ÇÅ‚äÜùìîùìµ‚ÇÇ ‚åú ùêπ ¬∑À° EL2-a==a' ‚åù·∂ú (ùì§‚ÇÅ‚äÜùì§‚ÇÇ ‚åú ùêπ ¬∑À° EL2-a==a' ‚åù·∂ú) ) ‚àò El1Fa'‚ÜíFa ‚àò (ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ ‚åú ùêπ ¬∑ ≥ EL2-a==a' ‚åù·∂ú (ùì§‚ÇÅ‚äÜùì§‚ÇÇ ‚åú ùêπ ¬∑ ≥ EL2-a==a' ‚åù·∂ú))

     Pi' : Œ†-‚ü® ùì§ 2 , ùìîùìµ 2 ‚ü© ùê¥ ùêπ
     Œ†-dom {{Pi'}} = U2ùê¥
     Œ†-cod {{Pi'}} = U2ùêπ
     cod-unif¬π {{Œ†-props {{Pi'}}}} prf prf'
       rewrite cod-unif¬π (‚äÜ‚Üí‚àà (ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ ‚åú ùê¥ ‚åù·µà U2ùê¥) prf) (‚äÜ‚Üí‚àà (ùìîùìµ‚ÇÅ‚äáùìîùìµ‚ÇÇ ‚åú ùê¥ ‚åù·µà U2ùê¥) prf') = refl
     cod-unif¬≤ {{Œ†-props {{Pi'}}}} = Œª a==a' ‚Üí (unif¬≤‚äÜ a==a') , (unif¬≤‚äá a==a')

ùì¢ùìÆùìΩ‚ÇÅ‚äÜùì¢ùìÆùìΩ‚ÇÇ : ‚àÄ{ùê¥ ùêµ} ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ 1 ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ 2
ùì¢ùìÆùìΩ‚ÇÅ‚äÜùì¢ùìÆùìΩ‚ÇÇ = {!!}



ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ   : ‚àÄ{ùìÄ} ‚Üí ‚àÄ{ùê¥} ‚Üí ùì§ ùìÄ ùê¥ ‚Üí ùì§ (suc ùìÄ) ùê¥
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ : ‚àÄ{ùìÄ} ‚Üí ‚àÄ{ùê¥ ùêµ} ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ ùìÄ ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ (suc ùìÄ)
```
Furthermore, the interpretation of a type code at a given level is stable, i.e.,
it is preserved by the successor universe:
```agda
-- it should indeed hold that (UA : ùì§ ùìÄ ùê¥) ‚Üí ùìîùìµ ùìÄ UA ‚â°·¥ø ùìîùìµ (suc ùìÄ) (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ UA)
-- this stronger property allows contravariant use in the Pi type cases
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ : ‚àÄ{ùìÄ} ‚Üí ‚àÄ{ùê¥} ‚Üí (UA : ùì§ ùìÄ ùê¥) ‚Üí ùìîùìµ ùìÄ UA ‚äÜ ùìîùìµ (suc ùìÄ) (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ UA)
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ : ‚àÄ{ùìÄ} ‚Üí ‚àÄ{ùê¥} ‚Üí (UA : ùì§ ùìÄ ùê¥) ‚Üí ùìîùìµ (suc ùìÄ) (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ UA) ‚äÜ ùìîùìµ ùìÄ UA
```
We prove these in tandem:
```agda
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {zero}        (ùì§‚ÇÄ-NE {NE})                     = ùì§‚Çñ‚Çä‚ÇÅ-NE {{ùïå 0}} {NE} (‚â§‚Ä≤-step ‚â§‚Ä≤-refl)
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {zero}         ùì§‚ÇÄ-ùëÅ                            = ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {zero}         ùì§‚ÇÄ-‚ä§                            = ùì§‚Çñ‚Çä‚ÇÅ-‚ä§
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {zero}         ùì§‚ÇÄ-‚ä•                            = ùì§‚Çñ‚Çä‚ÇÅ-‚ä•
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {zero}        (ùì§‚ÇÄ-Œ† ùê¥ ùêπ {{Pi}})                = ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{Pi'}}
  where
     U1ùê¥ : ùì§ 1 ùê¥
     U1ùê¥ = ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà

     U1ùêπ : ‚àÄ {ùëé} ‚Üí ùëé ‚àà ùìîùìµ 1 U1ùê¥ ‚Üí [ ùêπ ‚àô ùëé ]‚àà ùì§ 1
     U1ùêπ a‚ààùìîùìµ0 with ‚åú ùêπ ‚åù·∂ú (‚äÜ‚Üí‚àà (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà) a‚ààùìîùìµ0)
     ... | U0Fa = [‚Åà ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚åú U0Fa ‚åù ]

     unif¬≤‚äÜ : ‚àÄ {ùëé ùëé'} ‚Üí (a==a' : ùëé == ùëé' ‚àà ùìîùìµ 1 (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà)) ‚Üí
                 ùìîùìµ 1 ‚åú U1ùêπ ‚àôÀ° a==a' ‚åù ‚äÜ ùìîùìµ 1 ‚åú U1ùêπ ‚àô ≥ a==a' ‚åù
     unif¬≤‚äÜ a==a' with (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà a==a') | U1ùêπ ‚àôÀ° a==a' | U1ùêπ ‚àô ≥ a==a'
     ... | EL1-a==a' | [‚Åà U1Fa ] | [‚Åà U1Fa' ] with cod-unif¬≤ EL1-a==a'
     ... | El0Fa‚ÜíFa' , _ =  (ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùêπ ¬∑ ≥ EL1-a==a' ‚åù·∂ú) ‚àò El0Fa‚ÜíFa' ‚àò (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùêπ ¬∑À° EL1-a==a' ‚åù·∂ú)

     unif¬≤‚äá : ‚àÄ {ùëé ùëé'} ‚Üí (a==a' : ùëé == ùëé' ‚àà ùìîùìµ 1 (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà)) ‚Üí
                 ùìîùìµ 1 ‚åú U1ùêπ ‚àô ≥ a==a' ‚åù ‚äÜ ùìîùìµ 1 ‚åú U1ùêπ ‚àôÀ° a==a' ‚åù
     unif¬≤‚äá a==a' with (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà a==a') | U1ùêπ ‚àôÀ° a==a' | U1ùêπ ‚àô ≥ a==a'
     ... | EL1-a==a' | [‚Åà U1Fa ] | [‚Åà U1Fa' ] with cod-unif¬≤ EL1-a==a'
     ... | _ , El0Fa'‚ÜíFa =  (ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùêπ ¬∑À° EL1-a==a' ‚åù·∂ú) ‚àò El0Fa'‚ÜíFa ‚àò (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùêπ ¬∑ ≥ EL1-a==a' ‚åù·∂ú)

     Pi' : Œ†-‚ü® ùì§ 1 , ùìîùìµ 1 ‚ü© ùê¥ ùêπ
     Œ†-dom {{Pi'}} = U1ùê¥
     Œ†-cod {{Pi'}} = U1ùêπ
     cod-unif¬π {{Œ†-props {{Pi'}}}} prf prf'
       rewrite cod-unif¬π (‚äÜ‚Üí‚àà (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà) prf) (‚äÜ‚Üí‚àà (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà) prf') = refl
     cod-unif¬≤ {{Œ†-props {{Pi'}}}} = Œª a==a' ‚Üí (unif¬≤‚äÜ a==a') , (unif¬≤‚äá a==a')


ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {suc ùìÄ}       (ùì§‚Çñ‚Çä‚ÇÅ-NE lt) rewrite (ùïåùìÄ‚ÜìùìÄ‚â° ùìÄ)   = ùì§‚Çñ‚Çä‚ÇÅ-NE (‚â§‚Ä≤-step lt)
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ                          = ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì§‚Çñ‚Çä‚ÇÅ-‚ä§                          = ùì§‚Çñ‚Çä‚ÇÅ-‚ä§
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì§‚Çñ‚Çä‚ÇÅ-‚ä•                          = ùì§‚Çñ‚Çä‚ÇÅ-‚ä•
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {suc 0}       (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìUS ‚ÜìUT)           = ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚ÜìUS) (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚ÜìUT)
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {suc (suc ùìÄ)} (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ ‚ÜìUS ‚ÜìUT)           = ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚ÜìUS) (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚ÜìUT)
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {suc ùìÄ}       (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< lt) rewrite (ùïåùìÄ‚ÜìùìÄ‚â° ùìÄ) = ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< (‚â§‚Ä≤-step lt)
ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {suc ùìÄ}       (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{Pi}})              = ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{Pi'}}
  where
     U1ùê¥ : ùì§ (suc (suc ùìÄ)) ùê¥
     U1ùê¥ = ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà

     U1ùêπ : ‚àÄ {ùëé} ‚Üí ùëé ‚àà ùìîùìµ (suc (suc ùìÄ)) U1ùê¥ ‚Üí [ ùêπ ‚àô ùëé ]‚àà ùì§ (suc (suc ùìÄ))
     U1ùêπ a‚ààùìîùìµ with ‚åú ùêπ ‚åù·∂ú (‚äÜ‚Üí‚àà (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà) a‚ààùìîùìµ)
     ... | U0Fa = [‚Åà ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚åú U0Fa ‚åù ]

     unif¬≤‚äÜ : ‚àÄ {ùëé ùëé'} ‚Üí (a==a' : ùëé == ùëé' ‚àà ùìîùìµ (suc (suc ùìÄ)) (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà)) ‚Üí
                 ùìîùìµ (suc (suc ùìÄ)) ‚åú U1ùêπ ‚àôÀ° a==a' ‚åù ‚äÜ ùìîùìµ (suc (suc ùìÄ)) ‚åú U1ùêπ ‚àô ≥ a==a' ‚åù
     unif¬≤‚äÜ a==a' with (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà a==a') | U1ùêπ ‚àôÀ° a==a' | U1ùêπ ‚àô ≥ a==a'
     ... | EL1-a==a' | [‚Åà U1Fa ] | [‚Åà U1Fa' ] with cod-unif¬≤ EL1-a==a'
     ... | El0Fa‚ÜíFa' , _ =  (ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùêπ ¬∑ ≥ EL1-a==a' ‚åù·∂ú) ‚àò El0Fa‚ÜíFa' ‚àò (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùêπ ¬∑À° EL1-a==a' ‚åù·∂ú)

     unif¬≤‚äá : ‚àÄ {ùëé ùëé'} ‚Üí (a==a' : ùëé == ùëé' ‚àà ùìîùìµ (suc (suc ùìÄ)) (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà)) ‚Üí
                 ùìîùìµ (suc (suc ùìÄ)) ‚åú U1ùêπ ‚àô ≥ a==a' ‚åù ‚äÜ ùìîùìµ (suc (suc ùìÄ)) ‚åú U1ùêπ ‚àôÀ° a==a' ‚åù
     unif¬≤‚äá a==a' with (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà a==a') | U1ùêπ ‚àôÀ° a==a' | U1ùêπ ‚àô ≥ a==a'
     ... | EL1-a==a' | [‚Åà U1Fa ] | [‚Åà U1Fa' ] with cod-unif¬≤ EL1-a==a'
     ... | _ , El0Fa'‚ÜíFa = (ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùêπ ¬∑À° EL1-a==a' ‚åù·∂ú) ‚àò El0Fa'‚ÜíFa ‚àò (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùêπ ¬∑ ≥ EL1-a==a' ‚åù·∂ú)

     Pi' : Œ†-‚ü® ùì§ (suc (suc ùìÄ)) , ùìîùìµ (suc (suc ùìÄ)) ‚ü© ùê¥ ùêπ
     Œ†-dom {{Pi'}} = U1ùê¥
     Œ†-cod {{Pi'}} = U1ùêπ
     cod-unif¬π {{Œ†-props {{Pi'}}}} prf prf'
        rewrite cod-unif¬π (‚äÜ‚Üí‚àà (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà) prf) (‚äÜ‚Üí‚àà (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà) prf') = refl
     cod-unif¬≤ {{Œ†-props {{Pi'}}}} = Œª a==a' ‚Üí (unif¬≤‚äÜ a==a') , (unif¬≤‚äá a==a')

ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {zero}         ùì§‚ÇÄ-NE                         = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {zero}         ùì§‚ÇÄ-ùëÅ                          = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {zero}         ùì§‚ÇÄ-‚ä§                          = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {zero}         ùì§‚ÇÄ-‚ä•                          = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {zero}        (ùì§‚ÇÄ-Œ† ùê¥ ùêπ) {f} {f'}   f==f'‚ààŒ†0 a==a' with (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà a==a')
... | a==a'‚ààEl0 with ‚åú ùêπ ¬∑À° a==a'‚ààEl0 ‚åù·∂ú | f==f'‚ààŒ†0 a==a'‚ààEl0
... | U0Fa | [‚Åà-rel fa==f'a'‚ààùêπa ] = [‚Åà-rel ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ U0Fa fa==f'a'‚ààùêπa ]


ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}       (ùì§‚Çñ‚Çä‚ÇÅ-NE lt) rewrite (ùïåùìÄ‚ÜìùìÄ‚â° ùìÄ) = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ                         = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì§‚Çñ‚Çä‚ÇÅ-‚ä§                         = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì§‚Çñ‚Çä‚ÇÅ-‚ä•                         = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc zero} (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ UT US) (ùì•Type-ne x x‚ÇÅ x‚ÇÇ x‚ÇÉ x‚ÇÑ) = {!!}
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc zero} (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ UT US) (ùì•Type-val x x‚ÇÅ) = {!!}
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc (suc ùìÄ)} (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ UT US) (ùì•Type-ne x x‚ÇÅ x‚ÇÇ x‚ÇÉ x‚ÇÑ) = {!!}
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc (suc ùìÄ)} (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ UT US) (ùì•Type-val x x‚ÇÅ) = {!!}
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc zero}    (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ‚â§‚Ä≤-refl)            = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc (suc ùìÄ)} (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ‚â§‚Ä≤-refl)            = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc (suc ùìÄ)} (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< (‚â§‚Ä≤-step lt))       = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}       (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ)  {f} {f'}   f==f'‚ààŒ†k+1 a==a' with (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}  ‚åú ùê¥ ‚åù·µà a==a')
... | a==a'‚ààElk+1 with ‚åú ùêπ ¬∑À° a==a'‚ààElk+1 ‚åù·∂ú | f==f'‚ààŒ†k+1 a==a'‚ààElk+1
... | Uk+1Fa | [‚Åà-rel fa==f'a'‚ààùêπa ] = [‚Åà-rel ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ} Uk+1Fa fa==f'a'‚ààùêπa ]

ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {zero}         ùì§‚ÇÄ-NE                         = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {zero}         ùì§‚ÇÄ-ùëÅ                          = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {zero}         ùì§‚ÇÄ-‚ä§                          = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {zero}         ùì§‚ÇÄ-‚ä•                          = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {zero}        (ùì§‚ÇÄ-Œ† ùê¥ ùêπ) {f} {f'}   f==f'‚ààŒ†1 a==a' with (ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ ‚åú ùê¥ ‚åù·µà a==a')
... | a==a'‚ààEl1 with f==f'‚ààŒ†1 a==a'‚ààEl1
... | [‚Åà-rel fa==f'a'‚ààùêπa ]
      rewrite cod-unif¬π (memÀ° (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ Œ†-dom a==a'‚ààEl1))
                        (memÀ° a==a')
      with  ‚åú ùêπ ¬∑À° a==a' ‚åù·∂ú
... | U0Fa = [‚Åà-rel ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ U0Fa fa==f'a'‚ààùêπa ]

ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}       (ùì§‚Çñ‚Çä‚ÇÅ-NE lt) rewrite (ùïåùìÄ‚ÜìùìÄ‚â° ùìÄ) = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì§‚Çñ‚Çä‚ÇÅ-ùëÅ                        = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì§‚Çñ‚Çä‚ÇÅ-‚ä§                        = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì§‚Çñ‚Çä‚ÇÅ-‚ä•                        = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc zero} (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ UT US) (ùì•Type-ne x x‚ÇÅ x‚ÇÇ x‚ÇÉ x‚ÇÑ) = {!!}
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc zero} (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ UT US) (ùì•Type-val x x‚ÇÅ) = {!!}
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc (suc ùìÄ)} (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ UT US) (ùì•Type-ne x x‚ÇÅ x‚ÇÇ x‚ÇÉ x‚ÇÑ) = {!!}
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc (suc ùìÄ)} (ùì§‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ UT US) (ùì•Type-val x x‚ÇÅ) = {!!}
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc zero}    (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ‚â§‚Ä≤-refl)            = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc (suc ùìÄ)} (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ‚â§‚Ä≤-refl)            = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc (suc ùìÄ)} (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< (‚â§‚Ä≤-step lt))       = Œª z ‚Üí z
ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}       (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ) {f} {f'} f==f'‚ààŒ†k+2 a==a' with (ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ} ‚åú ùê¥ ‚åù·µà a==a')
... | a==a'‚ààElk+2 with f==f'‚ààŒ†k+2 a==a'‚ààElk+2
... | [‚Åà-rel fa==f'a'‚ààùêπa ]
      rewrite cod-unif¬π (memÀ° (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ} Œ†-dom a==a'‚ààElk+2))
                        (memÀ° a==a')
      with  ‚åú ùêπ ¬∑À° a==a' ‚åù·∂ú
... | Uk+1Fa = [‚Åà-rel ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ} Uk+1Fa fa==f'a'‚ààùêπa ]
```
## Upcast Lemmas for ùì§ and ùìîùìµ

Using the previous lemmas, we prove their more general counterparts, which relate
a universe level to arbitrary larger levels. These lemmas provide useful
"upcast" operations:

```agda
ùì§‚Üë : ‚àÄ{ùìÅ ùìÄ} ‚Üí ùìÅ ‚â§‚Ä≤ ùìÄ ‚Üí ‚àÄ{ùê¥} ‚Üí ùì§ ùìÅ ùê¥ ‚Üí ùì§ ùìÄ ùê¥
ùì§‚Üë ‚â§‚Ä≤-refl       = Œª u ‚Üí u
ùì§‚Üë (‚â§‚Ä≤-step ùìÅ‚â§ùìÄ) = ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ ‚àò (ùì§‚Üë ùìÅ‚â§ùìÄ)

ùìîùìµ‚Üë : ‚àÄ{ùìÅ ùìÄ} ‚Üí (ùìÅ‚â§ùìÄ : ùìÅ ‚â§‚Ä≤ ùìÄ) ‚Üí ‚àÄ{ùê¥} ‚Üí (UA : ùì§ ùìÅ ùê¥) ‚Üí ùìîùìµ ùìÅ UA ‚â°·¥ø ùìîùìµ ùìÄ (ùì§‚Üë ùìÅ‚â§ùìÄ UA)
ùìîùìµ‚Üë ‚â§‚Ä≤-refl       _  = ‚â°‚Üí‚â°·¥ø refl
ùìîùìµ‚Üë (‚â§‚Ä≤-step ùìÅ‚â§ùìÄ) UA = (ùìîùìµ‚Çñ‚äÜùìîùìµ‚Çñ‚Çä‚ÇÅ (ùì§‚Üë ùìÅ‚â§ùìÄ UA)) ‚àò (proj‚ÇÅ (ùìîùìµ‚Üë ùìÅ‚â§ùìÄ UA)) ,
                       (proj‚ÇÇ (ùìîùìµ‚Üë ùìÅ‚â§ùìÄ UA))     ‚àò (ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ (ùì§‚Üë ùìÅ‚â§ùìÄ UA))
```
## Cumulativity of ùì¢ùìÆùìΩ

Similarly, we first prove that two related codes at one universe level remain
related in the immediate successor universe:

```agda
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {zero}        (ùì¢ùìÆùìΩ‚ÇÄ-NE NE==NE') = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE (‚â§‚Ä≤-step ‚â§‚Ä≤-refl) NE==NE'
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {zero}         ùì¢ùìÆùìΩ‚ÇÄ-ùëÅ = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {zero}         ùì¢ùìÆùìΩ‚ÇÄ-‚ä§ = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {zero}         ùì¢ùìÆùìΩ‚ÇÄ-‚ä• = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä•
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {zero}        (ùì¢ùìÆùìΩ‚ÇÄ-Œ† A==A' {ùì§‚ÇÄ-Œ† ùê¥ ùêπ {{Pi}}} {ùì§‚ÇÄ-Œ† ùê¥' ùêπ' {{Pi'}}} F==F') =
  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† {{_}} {ùê¥} {ùêπ} {ùê¥'} {ùêπ'} A==A'+ {Pi+} {Pi'+} F==F'+
    where
      A==A'+ : ùê¥ == ùê¥' ‚àà ùì¢ùìÆùìΩ 1
      A==A'+ = ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ A==A'

      Pi+ : Œ†-‚ü® ùì§ 1 , ùìîùìµ 1 ‚ü© ùê¥ ùêπ
      Pi+ with ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ (ùì§‚ÇÄ-Œ† ùê¥ ùêπ)
      ... | ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{x}} = x

      Pi'+ : Œ†-‚ü® ùì§ 1 , ùìîùìµ 1 ‚ü© ùê¥' ùêπ'
      Pi'+ with ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ (ùì§‚ÇÄ-Œ† ùê¥' ùêπ')
      ... | ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥' ùêπ' {{x}} = x

      F==F'+ : ‚¶É Pi0 : Œ†-‚ü® ùì§ 1 , ùìîùìµ 1 ‚ü© ùê¥ ùêπ ‚¶Ñ
               ‚¶É Pi0' : Œ†-‚ü® ùì§ 1 , ùìîùìµ 1 ‚ü© ùê¥' ùêπ' ‚¶Ñ {a a' : ùïç}
               (a==a' : a == a' ‚àà ùìîùìµ 1 ‚åú ùê¥ ‚åù·µà) ‚Üí
                   [ ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ] == [ ‚åú ùêπ' ‚åù·∂ú ‚àô ≥ ùìîùìµ-resp-‚äÜ {1} (ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ A==A') {‚åú ùê¥ ‚åù·µà} {‚åú ùê¥' ‚åù·µà} a==a' ] ‚àà ùì¢ùìÆùìΩ 1
      F==F'+ {{Pi0}} {{Pi0'}} El1A-a==a' with F==F' {{Pi}} {{Pi'}} | ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ (Œ†-dom {{Pi}})
      ... | F==F'-PiPi' | El+1Pi‚ÜíEl0Pi with ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif {{ùïå 0}} (Œ†-dom {{Pi0}}) (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ (Œ†-dom {{Pi}}))
      ... | El1Pi0‚ÜíEL1Pi , _  with El+1Pi‚ÜíEl0Pi (El1Pi0‚ÜíEL1Pi El1A-a==a')
      ... | El0Pi-a==a' with F==F'-PiPi' El0Pi-a==a'
      ... | Fa==F'a'‚ààSet0 with ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ Fa==F'a'‚ààSet0
      ... | Fa==F'a'‚ààSet1 with (Œ†-cod {{Pi}}) ‚àôÀ° El0Pi-a==a'
                             | (Œ†-cod {{Pi'}}) ‚àô ≥ (ùìîùìµ‚ÇÄ-resp-‚äÜ A==A' El0Pi-a==a')
                             | (Œ†-cod {{Pi0}}) ‚àôÀ° El1A-a==a'
                             | (Œ†-cod {{Pi0'}}) ‚àô ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ {{ùïå 0}} A==A'+ {Œ†-dom {{Pi0}}} {Œ†-dom {{Pi0'}}} El1A-a==a')
      ... | record { ‚Åà-eval = F¬∑a‚áìx }
          | record { ‚Åà-eval = F'¬∑a'‚áìy }
          | record { ‚Åà-eval = F¬∑a‚áìx' }
          | record { ‚Åà-eval = F'¬∑a'‚áìy' }
            rewrite det-¬∑ F¬∑a‚áìx' F¬∑a‚áìx | det-¬∑ F'¬∑a'‚áìy' F'¬∑a'‚áìy
            = Fa==F'a'‚ààSet1

ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}       (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE lt NE==NE') rewrite (ùïåùìÄ‚ÜìùìÄ‚â° ùìÄ) =
  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-NE (‚â§‚Ä≤-step lt) NE==NE'
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÅ
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§ = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä§
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}        ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä• = ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ä•
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {suc zero}    (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ S==S' T==T') =
  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ (ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ S==S') (ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ T==T')
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {suc (suc ùìÄ)} (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ S==S' T==T') =
  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-‚ü™Type‚ãØ‚ü´ (ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ S==S') (ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ T==T')
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}       (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< lt) rewrite (ùïåùìÄ‚ÜìùìÄ‚â° ùìÄ) =
  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< (‚â§‚Ä≤-step lt)
ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {suc ùìÄ}       (ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† {ùê¥} {ùêπ} {ùê¥'} {ùêπ'} A==A' {Pi} {Pi'} F==F') =
  ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ-Œ† {{_}} {ùê¥} {ùêπ} {ùê¥'} {ùêπ'} A==A'+ {Pi+} {Pi'+} F==F'+
    where
      A==A'+ : ùê¥ == ùê¥' ‚àà ùì¢ùìÆùìΩ (suc (suc ùìÄ))
      A==A'+ = ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ A==A'

      Pi+ : Œ†-‚ü® ùì§ (suc (suc ùìÄ)) , ùìîùìµ (suc (suc ùìÄ)) ‚ü© ùê¥ ùêπ
      -- we can just reuse the ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ result here
      Pi+ with ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {suc ùìÄ} (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥ ùêπ {{Pi}})
      ... | ùì§‚Çñ‚Çä‚ÇÅ-Œ† _ _ {{Pi'}} = Pi'

      Pi'+ : Œ†-‚ü® ùì§ (suc (suc ùìÄ)) , ùìîùìµ (suc (suc ùìÄ)) ‚ü© ùê¥' ùêπ'
      Pi'+ with ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ {suc ùìÄ} (ùì§‚Çñ‚Çä‚ÇÅ-Œ† ùê¥' ùêπ' {{Pi'}})
      ... | ùì§‚Çñ‚Çä‚ÇÅ-Œ† _ _ {{Pi''}} = Pi''

      F==F'+ : ‚¶É Pi0 : Œ†-‚ü® ùì§ (suc (suc ùìÄ)) , ùìîùìµ (suc (suc ùìÄ)) ‚ü© ùê¥ ùêπ ‚¶Ñ
               ‚¶É Pi0' : Œ†-‚ü® ùì§ (suc (suc ùìÄ)) , ùìîùìµ (suc (suc ùìÄ)) ‚ü© ùê¥' ùêπ' ‚¶Ñ {a a' : ùïç}
               (a==a' : a == a' ‚àà ùìîùìµ (suc (suc ùìÄ)) ‚åú ùê¥ ‚åù·µà) ‚Üí
                   [ ‚åú ùêπ ‚åù·∂ú ‚àôÀ° a==a' ] == [ ‚åú ùêπ' ‚åù·∂ú ‚àô ≥ ùìîùìµ-resp-‚äÜ {(suc (suc ùìÄ))} (ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ A==A') {‚åú ùê¥ ‚åù·µà} {‚åú ùê¥' ‚åù·µà} a==a' ] ‚àà ùì¢ùìÆùìΩ (suc (suc ùìÄ))
      F==F'+ {{Pi0}} {{Pi0'}} El1A-a==a' with F==F' {{Pi}} {{Pi'}} | ùìîùìµ‚Çñ‚äáùìîùìµ‚Çñ‚Çä‚ÇÅ {suc ùìÄ} (Œ†-dom {{Pi}})
      ... | F==F'-PiPi' | El+1Pi‚ÜíEl0Pi with ùìîùìµ‚Çñ‚Çä‚ÇÅ-unif {{ùïå (suc ùìÄ)}} (Œ†-dom {{Pi0}}) (ùì§‚Çñ‚äÜùì§‚Çñ‚Çä‚ÇÅ (Œ†-dom {{Pi}}))
      ... | El1Pi0‚ÜíEL1Pi , _  with El+1Pi‚ÜíEl0Pi (El1Pi0‚ÜíEL1Pi El1A-a==a')
      ... | El0Pi-a==a' with F==F'-PiPi' El0Pi-a==a'
      ... | Fa==F'a'‚ààSet0 with ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {suc ùìÄ} Fa==F'a'‚ààSet0
      ... | Fa==F'a'‚ààSet1 with (Œ†-cod {{Pi}}) ‚àôÀ° El0Pi-a==a'
                             | (Œ†-cod {{Pi'}}) ‚àô ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ {{ùïå ùìÄ}} A==A' {Œ†-dom {{Pi}}} {Œ†-dom {{Pi'}}} El0Pi-a==a')
                             | (Œ†-cod {{Pi0}}) ‚àôÀ° El1A-a==a'
                             | (Œ†-cod {{Pi0'}}) ‚àô ≥ (ùìîùìµ‚Çñ‚Çä‚ÇÅ-resp-‚äÜ {{ùïå (suc ùìÄ)}} A==A'+ {Œ†-dom {{Pi0}}} {Œ†-dom {{Pi0'}}} El1A-a==a')
      ... | record { ‚Åà-eval = F¬∑a‚áìx }
          | record { ‚Åà-eval = F'¬∑a'‚áìy }
          | record { ‚Åà-eval = F¬∑a‚áìx' }
          | record { ‚Åà-eval = F'¬∑a'‚áìy' }
            rewrite det-¬∑ F¬∑a‚áìx' F¬∑a‚áìx | det-¬∑ F'¬∑a'‚áìy' F'¬∑a'‚áìy
            = Fa==F'a'‚ààSet1
```
## Upcast Lemma for ùì¢ùìÆùìΩ

Finally, we generalize to arbitrary higher levels:

```agda
ùì¢ùìÆùìΩ‚Üë : ‚àÄ{ùìÅ ùìÄ} ‚Üí ùìÅ ‚â§‚Ä≤ ùìÄ ‚Üí ‚àÄ{ùê¥ ùêµ} ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ ùìÅ ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ ùìÄ
ùì¢ùìÆùìΩ‚Üë ‚â§‚Ä≤-refl = Œª p ‚Üí p
ùì¢ùìÆùìΩ‚Üë (‚â§‚Ä≤-step ùìÅ‚â§ùìÄ) = ùì¢ùìÆùìΩ‚Çñ‚äÜùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ ‚àò (ùì¢ùìÆùìΩ‚Üë ùìÅ‚â§ùìÄ)

-- ùì¢ùìÆùìΩ‚Üíùì§ : ‚àÄ{ùìÄ ùê¥ ùêµ} ‚Üí ùê¥ == ùêµ ‚àà ùì¢ùìÆùìΩ ùìÄ ‚Üí ùì§ ùìÄ ùê¥
-- ùì¢ùìÆùìΩ‚Üíùì§ = {!!}
```
# The Limit Universe

The level-indexed family of cumulative universes permits the definition of a limit, which
hides the explicit universe levels and exhibits comp# Cumulative PER Universe Hierarchy

```agda
ùì§œâ   : ùïç ‚Üí Set
ùìîùìµœâ  : ùì§œâ ‚üπ Rel
ùì¢ùìÆùìΩœâ : Rel

ùì§œâ ùê¥          = Œ£[ ùìÄ ‚àà ‚Ñí ](ùì§ ùìÄ ùê¥)
ùìîùìµœâ (ùìÄ , U‚ÇñA) = ùìîùìµ ùìÄ U‚ÇñA
ùì¢ùìÆùìΩœâ ùê¥ ùê¥'     = Œ£[ ùìÄ ‚àà ‚Ñí ](ùê¥ == ùê¥' ‚àà ùì¢ùìÆùìΩ ùìÄ)

Per-ùìîùìµœâ : ‚àÄ{ùê¥} ‚Üí (UA : ùì§œâ ùê¥) ‚Üí Per (ùìîùìµœâ UA)
Per.per-sym   (Per-ùìîùìµœâ (ùìÄ , UA)) = per-sym {{Per-ùìîùìµ UA}}
Per.per-trans (Per-ùìîùìµœâ (ùìÄ , UA)) = per-trans {{Per-ùìîùìµ UA}}

ùì¢ùìÆùìΩœâ-sym : Sym ùì¢ùìÆùìΩœâ
ùì¢ùìÆùìΩœâ-sym (zero , A==B)  = zero , (per-sym A==B)
ùì¢ùìÆùìΩœâ-sym (suc ùìÄ , A==B) = suc ùìÄ , per-sym {{Per-ùì¢ùìÆùìΩ‚Çñ‚Çä‚ÇÅ {{ùïå ùìÄ}}}} A==B

ùì¢ùìÆùìΩœâ-trans : Trans ùì¢ùìÆùìΩœâ
ùì¢ùìÆùìΩœâ-trans (ùìÄ , A==B) (ùìÄ' , B==C) = ùìÄ ‚äî ùìÄ' , per-trans (ùì¢ùìÆùìΩ‚Üë (proj‚ÇÅ (m,n‚â§‚Ä≤m‚äîn ùìÄ ùìÄ')) A==B) (ùì¢ùìÆùìΩ‚Üë (proj‚ÇÇ (m,n‚â§‚Ä≤m‚äîn ùìÄ ùìÄ')) B==C)

instance Per-ùì¢ùìÆùìΩœâ : Per ùì¢ùìÆùìΩœâ
per-sym   {{Per-ùì¢ùìÆùìΩœâ}} = ùì¢ùìÆùìΩœâ-sym
per-trans {{Per-ùì¢ùìÆùìΩœâ}} = ùì¢ùìÆùìΩœâ-trans

ùìîùìµœâ-resp-‚äÜ : Respect‚äÜ {ùì§œâ} ùìîùìµœâ ùì¢ùìÆùìΩœâ
ùìîùìµœâ-resp-‚äÜ (ùìÄ , A==B) {ùìÅ , UA} {ùìÇ , UB} with k,m,n‚â§‚Ä≤k‚äîm‚äîn ùìÄ ùìÅ ùìÇ
... | ùìÄ‚â§‚Ä≤ùìä , ùìÅ‚â§‚Ä≤ùìä , ùìÇ‚â§‚Ä≤ùìä with ùìÄ ‚äî ùìÅ ‚äî ùìÇ
... | ùìä with ùì¢ùìÆùìΩ‚Üë ùìÄ‚â§‚Ä≤ùìä A==B | ùìîùìµ‚Üë ùìÅ‚â§‚Ä≤ùìä UA | ùìîùìµ‚Üë ùìÇ‚â§‚Ä≤ùìä UB
... | A==B‚ààSetùìä | ELùìÅUA‚ÜíELùìä‚ÜëUA , _ | _ , ELùìä‚ÜëUB‚ÜíELùìÇUB with ùìîùìµ-resp-‚äÜ A==B‚ààSetùìä
... | ELùìä-resp
      = ELùìä‚ÜëUB‚ÜíELùìÇUB ‚àò ELùìä-resp ‚àò ELùìÅUA‚ÜíELùìä‚ÜëUA

ùìîùìµœâ-resp-‚äá : Respect‚äá {ùì§œâ} ùìîùìµœâ ùì¢ùìÆùìΩœâ
ùìîùìµœâ-resp-‚äá (ùìÄ , A==B) {ùìÅ , UA} {ùìÇ , UB} with k,m,n‚â§‚Ä≤k‚äîm‚äîn ùìÄ ùìÅ ùìÇ
... | ùìÄ‚â§‚Ä≤ùìä , ùìÅ‚â§‚Ä≤ùìä , ùìÇ‚â§‚Ä≤ùìä with ùìÄ ‚äî ùìÅ ‚äî ùìÇ
... | ùìä with ùì¢ùìÆùìΩ‚Üë ùìÄ‚â§‚Ä≤ùìä A==B | ùìîùìµ‚Üë ùìÅ‚â§‚Ä≤ùìä UA | ùìîùìµ‚Üë ùìÇ‚â§‚Ä≤ùìä UB
... | A==B‚ààSetùìä | _ , ELùìä‚ÜëUA‚ÜíELùìÅUA | ELùìÇUB‚ÜíELùìä‚ÜëUB , _ with ùìîùìµ-resp-‚äá A==B‚ààSetùìä
... | ELùìä-resp
      = ELùìä‚ÜëUA‚ÜíELùìÅUA ‚àò ELùìä-resp ‚àò ELùìÇUB‚ÜíELùìä‚ÜëUB

ùìîùìµœâ-unif : ‚àÄ{ùê¥} ‚Üí (prf prf' : ùì§œâ ùê¥) ‚Üí ùìîùìµœâ prf ‚â°·¥ø ùìîùìµœâ prf'
ùìîùìµœâ-unif (ùìÄ , UkA) (ùìÅ , UlA) with m,n‚â§‚Ä≤m‚äîn ùìÄ ùìÅ
... | ùìÄ‚â§ùìä , ùìÅ‚â§ùìä with ùìÄ ‚äî ùìÅ
... | ùìä with ùìîùìµ‚Üë ùìÄ‚â§ùìä UkA | ùìîùìµ‚Üë ùìÅ‚â§ùìä UlA | ùìîùìµ-unif (ùì§‚Üë ùìÄ‚â§ùìä UkA) (ùì§‚Üë ùìÅ‚â§ùìä UlA)
... | a , b | u , v | Elùìä-unifÀ° , Elùìä-unif ≥
      = v ‚àò Elùìä-unifÀ° ‚àò a , b ‚àò Elùìä-unif ≥ ‚àò u
```
Some facts that will come in handy for the logical relations proofs.
```agda
ùì§-ùëÜùëíùë° : ‚àÄ ùìÄ ‚Üí ùì§ (suc ùìÄ) (·∂ú (VùëÜùëíùë° ùìÄ))
ùì§-ùëÜùëíùë° ùìÄ with ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< {{ùïå ùìÄ}} {ùìÄ}
... | f rewrite (ùïåùìÄ‚ÜìùìÄ‚â° ùìÄ) = f ‚â§‚Ä≤-refl

ùì§œâ-ùëÜùëíùë° : ‚àÄ ùìÄ ‚Üí ùì§œâ (·∂ú (VùëÜùëíùë° ùìÄ))
ùì§œâ-ùëÜùëíùë° ùìÄ = (suc ùìÄ) , (ùì§-ùëÜùëíùë° ùìÄ)

ùì§ùìÄ-SetùìÅ : ‚àÄ{ùìÄ ùìÅ} ‚Üí ùì§ ùìÄ (·∂ú (VùëÜùëíùë° ùìÅ)) ‚Üí ùìÅ <‚Ä≤ ùìÄ
ùì§ùìÄ-SetùìÅ {suc ùìÄ} {ùìÅ} (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ùìÅ‚â§ùìÄ+1) rewrite ùïåùìÄ‚ÜìùìÄ‚â° ùìÄ = ùìÅ‚â§ùìÄ+1

ùìîùìµùìÄ+1-ùì¢ùìÆùìΩùìÄ : ‚àÄ{ùìÄ} ‚Üí ‚àÄ(US : ùì§ (suc ùìÄ) (·∂ú (VùëÜùëíùë° ùìÄ))) ‚Üí ùìîùìµ (suc ùìÄ) US ‚â°·¥ø ùì¢ùìÆùìΩ ùìÄ
ùìîùìµùìÄ+1-ùì¢ùìÆùìΩùìÄ {zero} (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ‚â§‚Ä≤-refl) = ‚â°·¥ø-refl
ùìîùìµùìÄ+1-ùì¢ùìÆùìΩùìÄ {suc ùìÄ} (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< ‚â§‚Ä≤-refl) = ‚â°·¥ø-refl
ùìîùìµùìÄ+1-ùì¢ùìÆùìΩùìÄ {suc ùìÄ} (ùì§‚Çñ‚Çä‚ÇÅ-ùëÜùëíùë°< (‚â§‚Ä≤-step ùìÄ+2‚â§ùìÄ+1)) = ‚ä•-elim (<‚Ä≤-irrefl ùìÄ+2‚â§ùìÄ+1)

ùìîùìµœâ-ùì¢ùìÆùìΩ : ‚àÄ {ùìÅ} ‚Üí ‚àÄ(US : ùì§œâ (·∂ú (VùëÜùëíùë° ùìÅ))) ‚Üí ùìîùìµœâ US ‚â°·¥ø ùì¢ùìÆùìΩ ùìÅ
ùìîùìµœâ-ùì¢ùìÆùìΩ {ùìÅ} ( ùìÄ , UùìÄSetùìÅ ) with ùì§ùìÄ-SetùìÅ UùìÄSetùìÅ | ùìîùìµùìÄ+1-ùì¢ùìÆùìΩùìÄ (ùì§-ùëÜùëíùë° ùìÅ)
... | ùìÅ+1‚â§ùìÄ | ELùìÅ+1‚â°SetùìÅ with ùìîùìµ‚Üë ùìÅ+1‚â§ùìÄ (ùì§-ùëÜùëíùë° ùìÅ) | ùìîùìµ-unif (ùì§‚Üë ùìÅ+1‚â§ùìÄ (ùì§-ùëÜùëíùë° ùìÅ)) UùìÄSetùìÅ
... | ElùìÅUSetùìÅ‚â°ElùìÄ‚ÜëUSetùìÅ | ElùìÄ‚ÜëUSetùìÅ‚â°ElùìÄUùìÄSetùìÅ
--TODO would be nice to have reasoning combinators analogous to the ones for ‚â°
      = ‚â°·¥ø-sym (‚â°·¥ø-trans (‚â°·¥ø-trans (‚â°·¥ø-sym ELùìÅ+1‚â°SetùìÅ) ElùìÅUSetùìÅ‚â°ElùìÄ‚ÜëUSetùìÅ) ElùìÄ‚ÜëUSetùìÅ‚â°ElùìÄUùìÄSetùìÅ)
```
